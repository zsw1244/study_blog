<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Express | zsw_blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/study_blog/favicon.ico">
    <link rel="apple-touch-icon" href="/study_blog/apple-touch-icon.png">
    <link rel="manifest" href="/study_blog/manifest.json">
    <script data-ad-client="ca-pub-7828333725993554" async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <meta name="description" content="web前端技术博客,简洁至上,专注web前端学习与总结。">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    <link rel="preload" href="/study_blog/assets/css/0.styles.9ff462de.css" as="style"><link rel="preload" href="/study_blog/assets/js/app.3481ffbf.js" as="script"><link rel="preload" href="/study_blog/assets/js/2.acc967ff.js" as="script"><link rel="preload" href="/study_blog/assets/js/64.9406cf50.js" as="script"><link rel="preload" href="/study_blog/assets/js/3.95372aae.js" as="script"><link rel="prefetch" href="/study_blog/assets/js/10.71e8a43a.js"><link rel="prefetch" href="/study_blog/assets/js/100.098bc10c.js"><link rel="prefetch" href="/study_blog/assets/js/101.991bf4c7.js"><link rel="prefetch" href="/study_blog/assets/js/102.60b413a3.js"><link rel="prefetch" href="/study_blog/assets/js/103.32401dc8.js"><link rel="prefetch" href="/study_blog/assets/js/104.abe8e59c.js"><link rel="prefetch" href="/study_blog/assets/js/105.415dcc83.js"><link rel="prefetch" href="/study_blog/assets/js/106.921f68d1.js"><link rel="prefetch" href="/study_blog/assets/js/107.86bd4541.js"><link rel="prefetch" href="/study_blog/assets/js/108.e4317455.js"><link rel="prefetch" href="/study_blog/assets/js/109.f496591b.js"><link rel="prefetch" href="/study_blog/assets/js/11.27822337.js"><link rel="prefetch" href="/study_blog/assets/js/110.b28cb15b.js"><link rel="prefetch" href="/study_blog/assets/js/111.44118bee.js"><link rel="prefetch" href="/study_blog/assets/js/112.e7250bc1.js"><link rel="prefetch" href="/study_blog/assets/js/113.88a2eae6.js"><link rel="prefetch" href="/study_blog/assets/js/114.86507bad.js"><link rel="prefetch" href="/study_blog/assets/js/115.306d5d4f.js"><link rel="prefetch" href="/study_blog/assets/js/116.03825429.js"><link rel="prefetch" href="/study_blog/assets/js/117.bac11585.js"><link rel="prefetch" href="/study_blog/assets/js/118.b207b1bc.js"><link rel="prefetch" href="/study_blog/assets/js/119.91fe8a90.js"><link rel="prefetch" href="/study_blog/assets/js/12.3f5b61c1.js"><link rel="prefetch" href="/study_blog/assets/js/120.b11d6347.js"><link rel="prefetch" href="/study_blog/assets/js/121.2781cd00.js"><link rel="prefetch" href="/study_blog/assets/js/122.3570fed1.js"><link rel="prefetch" href="/study_blog/assets/js/123.9f2558b7.js"><link rel="prefetch" href="/study_blog/assets/js/124.05681c85.js"><link rel="prefetch" href="/study_blog/assets/js/125.0ba85919.js"><link rel="prefetch" href="/study_blog/assets/js/126.23f09eb6.js"><link rel="prefetch" href="/study_blog/assets/js/127.0e0bae8a.js"><link rel="prefetch" href="/study_blog/assets/js/128.581b85cb.js"><link rel="prefetch" href="/study_blog/assets/js/129.f204cd97.js"><link rel="prefetch" href="/study_blog/assets/js/13.a002d051.js"><link rel="prefetch" href="/study_blog/assets/js/130.9d52d7e6.js"><link rel="prefetch" href="/study_blog/assets/js/131.4324510d.js"><link rel="prefetch" href="/study_blog/assets/js/132.3256ad36.js"><link rel="prefetch" href="/study_blog/assets/js/133.4f705aa2.js"><link rel="prefetch" href="/study_blog/assets/js/134.6820a250.js"><link rel="prefetch" href="/study_blog/assets/js/135.19944498.js"><link rel="prefetch" href="/study_blog/assets/js/136.9d089805.js"><link rel="prefetch" href="/study_blog/assets/js/137.4e3f6e3f.js"><link rel="prefetch" href="/study_blog/assets/js/138.05f7abbc.js"><link rel="prefetch" href="/study_blog/assets/js/139.44ae083c.js"><link rel="prefetch" href="/study_blog/assets/js/14.d683f13d.js"><link rel="prefetch" href="/study_blog/assets/js/140.f171265f.js"><link rel="prefetch" href="/study_blog/assets/js/141.e327653c.js"><link rel="prefetch" href="/study_blog/assets/js/142.bfb4cb30.js"><link rel="prefetch" href="/study_blog/assets/js/143.781ea2b6.js"><link rel="prefetch" href="/study_blog/assets/js/144.4bc6770d.js"><link rel="prefetch" href="/study_blog/assets/js/145.c14b22f8.js"><link rel="prefetch" href="/study_blog/assets/js/146.7aaad3a2.js"><link rel="prefetch" href="/study_blog/assets/js/147.0b733955.js"><link rel="prefetch" href="/study_blog/assets/js/148.e43ec22d.js"><link rel="prefetch" href="/study_blog/assets/js/149.83486e4a.js"><link rel="prefetch" href="/study_blog/assets/js/15.c2048378.js"><link rel="prefetch" href="/study_blog/assets/js/150.81fa7f43.js"><link rel="prefetch" href="/study_blog/assets/js/151.a2782f28.js"><link rel="prefetch" href="/study_blog/assets/js/152.7c1321d0.js"><link rel="prefetch" href="/study_blog/assets/js/153.c8780ceb.js"><link rel="prefetch" href="/study_blog/assets/js/154.b2522197.js"><link rel="prefetch" href="/study_blog/assets/js/155.90aff9a6.js"><link rel="prefetch" href="/study_blog/assets/js/156.20182266.js"><link rel="prefetch" href="/study_blog/assets/js/157.068f350b.js"><link rel="prefetch" href="/study_blog/assets/js/158.b37f04a0.js"><link rel="prefetch" href="/study_blog/assets/js/159.89dce1fa.js"><link rel="prefetch" href="/study_blog/assets/js/16.ab5004dd.js"><link rel="prefetch" href="/study_blog/assets/js/160.d6368eac.js"><link rel="prefetch" href="/study_blog/assets/js/161.e09b57a7.js"><link rel="prefetch" href="/study_blog/assets/js/162.dea602e9.js"><link rel="prefetch" href="/study_blog/assets/js/163.0e4ecde2.js"><link rel="prefetch" href="/study_blog/assets/js/164.b1f35bcc.js"><link rel="prefetch" href="/study_blog/assets/js/165.32c676d5.js"><link rel="prefetch" href="/study_blog/assets/js/166.b65069ca.js"><link rel="prefetch" href="/study_blog/assets/js/167.d97ab612.js"><link rel="prefetch" href="/study_blog/assets/js/168.018e4899.js"><link rel="prefetch" href="/study_blog/assets/js/169.3bd5615d.js"><link rel="prefetch" href="/study_blog/assets/js/17.38020a39.js"><link rel="prefetch" href="/study_blog/assets/js/170.0cf63184.js"><link rel="prefetch" href="/study_blog/assets/js/171.833538f9.js"><link rel="prefetch" href="/study_blog/assets/js/172.caf81c15.js"><link rel="prefetch" href="/study_blog/assets/js/173.1d7b423f.js"><link rel="prefetch" href="/study_blog/assets/js/174.6fd93e98.js"><link rel="prefetch" href="/study_blog/assets/js/175.5d9fe703.js"><link rel="prefetch" href="/study_blog/assets/js/176.4781753c.js"><link rel="prefetch" href="/study_blog/assets/js/177.27222543.js"><link rel="prefetch" href="/study_blog/assets/js/178.34c457f7.js"><link rel="prefetch" href="/study_blog/assets/js/179.ddc7e179.js"><link rel="prefetch" href="/study_blog/assets/js/18.36c7fd43.js"><link rel="prefetch" href="/study_blog/assets/js/180.cbe25512.js"><link rel="prefetch" href="/study_blog/assets/js/181.278c9357.js"><link rel="prefetch" href="/study_blog/assets/js/182.33242bfd.js"><link rel="prefetch" href="/study_blog/assets/js/183.f6c75eea.js"><link rel="prefetch" href="/study_blog/assets/js/184.96f8122c.js"><link rel="prefetch" href="/study_blog/assets/js/185.b09b6f9c.js"><link rel="prefetch" href="/study_blog/assets/js/186.4053f9bd.js"><link rel="prefetch" href="/study_blog/assets/js/187.ee6989a3.js"><link rel="prefetch" href="/study_blog/assets/js/188.76aa4407.js"><link rel="prefetch" href="/study_blog/assets/js/189.44882c65.js"><link rel="prefetch" href="/study_blog/assets/js/19.b76afe6c.js"><link rel="prefetch" href="/study_blog/assets/js/190.6553b143.js"><link rel="prefetch" href="/study_blog/assets/js/191.01ac125f.js"><link rel="prefetch" href="/study_blog/assets/js/192.bcbf89a2.js"><link rel="prefetch" href="/study_blog/assets/js/193.0c3c116e.js"><link rel="prefetch" href="/study_blog/assets/js/194.a86d910b.js"><link rel="prefetch" href="/study_blog/assets/js/195.83c64170.js"><link rel="prefetch" href="/study_blog/assets/js/196.e6bdee43.js"><link rel="prefetch" href="/study_blog/assets/js/197.327226be.js"><link rel="prefetch" href="/study_blog/assets/js/198.77ff5329.js"><link rel="prefetch" href="/study_blog/assets/js/199.4da82500.js"><link rel="prefetch" href="/study_blog/assets/js/20.ebfa8a80.js"><link rel="prefetch" href="/study_blog/assets/js/200.e411aa84.js"><link rel="prefetch" href="/study_blog/assets/js/201.ab332c81.js"><link rel="prefetch" href="/study_blog/assets/js/202.91d84a8b.js"><link rel="prefetch" href="/study_blog/assets/js/203.35efb8db.js"><link rel="prefetch" href="/study_blog/assets/js/204.1c9af54d.js"><link rel="prefetch" href="/study_blog/assets/js/205.68be87d7.js"><link rel="prefetch" href="/study_blog/assets/js/206.adee565a.js"><link rel="prefetch" href="/study_blog/assets/js/207.0b772b18.js"><link rel="prefetch" href="/study_blog/assets/js/208.99608ea1.js"><link rel="prefetch" href="/study_blog/assets/js/209.0fc73d45.js"><link rel="prefetch" href="/study_blog/assets/js/21.fe32d29e.js"><link rel="prefetch" href="/study_blog/assets/js/210.f674cceb.js"><link rel="prefetch" href="/study_blog/assets/js/211.9444d225.js"><link rel="prefetch" href="/study_blog/assets/js/212.c0a9f3cc.js"><link rel="prefetch" href="/study_blog/assets/js/213.d8513c7b.js"><link rel="prefetch" href="/study_blog/assets/js/214.c9306729.js"><link rel="prefetch" href="/study_blog/assets/js/215.255a26b3.js"><link rel="prefetch" href="/study_blog/assets/js/216.f3194c27.js"><link rel="prefetch" href="/study_blog/assets/js/217.83a30918.js"><link rel="prefetch" href="/study_blog/assets/js/218.49924522.js"><link rel="prefetch" href="/study_blog/assets/js/219.a1ac0b81.js"><link rel="prefetch" href="/study_blog/assets/js/22.08c97ff8.js"><link rel="prefetch" href="/study_blog/assets/js/220.b9f2593c.js"><link rel="prefetch" href="/study_blog/assets/js/221.6f03c765.js"><link rel="prefetch" href="/study_blog/assets/js/222.471d96fd.js"><link rel="prefetch" href="/study_blog/assets/js/223.76098b30.js"><link rel="prefetch" href="/study_blog/assets/js/224.35789371.js"><link rel="prefetch" href="/study_blog/assets/js/225.847b0d80.js"><link rel="prefetch" href="/study_blog/assets/js/226.65a8fa19.js"><link rel="prefetch" href="/study_blog/assets/js/227.afa97d1b.js"><link rel="prefetch" href="/study_blog/assets/js/228.7be9da91.js"><link rel="prefetch" href="/study_blog/assets/js/229.25dc39e5.js"><link rel="prefetch" href="/study_blog/assets/js/23.440e0229.js"><link rel="prefetch" href="/study_blog/assets/js/24.df4e374e.js"><link rel="prefetch" href="/study_blog/assets/js/25.0d79205d.js"><link rel="prefetch" href="/study_blog/assets/js/26.a31fae38.js"><link rel="prefetch" href="/study_blog/assets/js/27.6ed957ee.js"><link rel="prefetch" href="/study_blog/assets/js/28.9b7200a5.js"><link rel="prefetch" href="/study_blog/assets/js/29.05c9ced3.js"><link rel="prefetch" href="/study_blog/assets/js/30.61ecc635.js"><link rel="prefetch" href="/study_blog/assets/js/31.0fd351f0.js"><link rel="prefetch" href="/study_blog/assets/js/32.6b647bc8.js"><link rel="prefetch" href="/study_blog/assets/js/33.65882a23.js"><link rel="prefetch" href="/study_blog/assets/js/34.d7440eb1.js"><link rel="prefetch" href="/study_blog/assets/js/35.a4f26c92.js"><link rel="prefetch" href="/study_blog/assets/js/36.dc32bea3.js"><link rel="prefetch" href="/study_blog/assets/js/37.661f25fb.js"><link rel="prefetch" href="/study_blog/assets/js/38.083b37e9.js"><link rel="prefetch" href="/study_blog/assets/js/39.38d103c3.js"><link rel="prefetch" href="/study_blog/assets/js/4.59577ee2.js"><link rel="prefetch" href="/study_blog/assets/js/40.23b43c46.js"><link rel="prefetch" href="/study_blog/assets/js/41.045b43d8.js"><link rel="prefetch" href="/study_blog/assets/js/42.cefdbc01.js"><link rel="prefetch" href="/study_blog/assets/js/43.cfd1d882.js"><link rel="prefetch" href="/study_blog/assets/js/44.96e69b87.js"><link rel="prefetch" href="/study_blog/assets/js/45.ccd3ab5e.js"><link rel="prefetch" href="/study_blog/assets/js/46.08655da5.js"><link rel="prefetch" href="/study_blog/assets/js/47.88783e1e.js"><link rel="prefetch" href="/study_blog/assets/js/48.a2a7071b.js"><link rel="prefetch" href="/study_blog/assets/js/49.66ad227a.js"><link rel="prefetch" href="/study_blog/assets/js/5.08350ee6.js"><link rel="prefetch" href="/study_blog/assets/js/50.74c41512.js"><link rel="prefetch" href="/study_blog/assets/js/51.419566bc.js"><link rel="prefetch" href="/study_blog/assets/js/52.f912fa4b.js"><link rel="prefetch" href="/study_blog/assets/js/53.61f8f508.js"><link rel="prefetch" href="/study_blog/assets/js/54.40a605ab.js"><link rel="prefetch" href="/study_blog/assets/js/55.24debdac.js"><link rel="prefetch" href="/study_blog/assets/js/56.424ce0ed.js"><link rel="prefetch" href="/study_blog/assets/js/57.b22db2b9.js"><link rel="prefetch" href="/study_blog/assets/js/58.dbc5b5bd.js"><link rel="prefetch" href="/study_blog/assets/js/59.95782d44.js"><link rel="prefetch" href="/study_blog/assets/js/6.7d17d579.js"><link rel="prefetch" href="/study_blog/assets/js/60.f5c80a14.js"><link rel="prefetch" href="/study_blog/assets/js/61.19641507.js"><link rel="prefetch" href="/study_blog/assets/js/62.ee0f5336.js"><link rel="prefetch" href="/study_blog/assets/js/63.f4f48ebe.js"><link rel="prefetch" href="/study_blog/assets/js/65.d6e98be6.js"><link rel="prefetch" href="/study_blog/assets/js/66.9f3cde11.js"><link rel="prefetch" href="/study_blog/assets/js/67.18276211.js"><link rel="prefetch" href="/study_blog/assets/js/68.1660e1e2.js"><link rel="prefetch" href="/study_blog/assets/js/69.bd030f7c.js"><link rel="prefetch" href="/study_blog/assets/js/7.8d59d279.js"><link rel="prefetch" href="/study_blog/assets/js/70.e945cc5a.js"><link rel="prefetch" href="/study_blog/assets/js/71.048504c8.js"><link rel="prefetch" href="/study_blog/assets/js/72.733d5399.js"><link rel="prefetch" href="/study_blog/assets/js/73.5606bf15.js"><link rel="prefetch" href="/study_blog/assets/js/74.94f42fd0.js"><link rel="prefetch" href="/study_blog/assets/js/75.9d8f5bfe.js"><link rel="prefetch" href="/study_blog/assets/js/76.c97630ba.js"><link rel="prefetch" href="/study_blog/assets/js/77.b3f4592a.js"><link rel="prefetch" href="/study_blog/assets/js/78.565a2ba0.js"><link rel="prefetch" href="/study_blog/assets/js/79.722fd2f4.js"><link rel="prefetch" href="/study_blog/assets/js/8.b77bfd56.js"><link rel="prefetch" href="/study_blog/assets/js/80.fc723383.js"><link rel="prefetch" href="/study_blog/assets/js/81.b8d72d94.js"><link rel="prefetch" href="/study_blog/assets/js/82.56914243.js"><link rel="prefetch" href="/study_blog/assets/js/83.f5d5113e.js"><link rel="prefetch" href="/study_blog/assets/js/84.73e8484b.js"><link rel="prefetch" href="/study_blog/assets/js/85.791dfb92.js"><link rel="prefetch" href="/study_blog/assets/js/86.557df3b3.js"><link rel="prefetch" href="/study_blog/assets/js/87.d62c5978.js"><link rel="prefetch" href="/study_blog/assets/js/88.6658830a.js"><link rel="prefetch" href="/study_blog/assets/js/89.a1572712.js"><link rel="prefetch" href="/study_blog/assets/js/9.3afc6a83.js"><link rel="prefetch" href="/study_blog/assets/js/90.8d30187a.js"><link rel="prefetch" href="/study_blog/assets/js/91.d1b896ce.js"><link rel="prefetch" href="/study_blog/assets/js/92.3d456592.js"><link rel="prefetch" href="/study_blog/assets/js/93.21f96ad5.js"><link rel="prefetch" href="/study_blog/assets/js/94.6e66888c.js"><link rel="prefetch" href="/study_blog/assets/js/95.12d4c41b.js"><link rel="prefetch" href="/study_blog/assets/js/96.8aec5fb7.js"><link rel="prefetch" href="/study_blog/assets/js/97.3affc934.js"><link rel="prefetch" href="/study_blog/assets/js/98.03913461.js"><link rel="prefetch" href="/study_blog/assets/js/99.ce9a0e6e.js">
    <link rel="stylesheet" href="/study_blog/assets/css/0.styles.9ff462de.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/study_blog/" class="home-link router-link-active"><img src="/study_blog/img/EB-logo.png" alt="zsw_blog" class="logo"> <span class="site-name can-hide">zsw_blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/study_blog/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/study_blog/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/study_blog/pages/8143cc480faf9a11/" class="nav-link">JavaScript</a></li><li class="dropdown-subitem"><a href="/study_blog/pages/5d463fbdb172d43b/" class="nav-link">Vue</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/study_blog/note/javascript/" class="nav-link">《JavaScript教程》笔记</a></li><li class="dropdown-subitem"><a href="/study_blog/note/js/" class="nav-link">《JavaScript高级程序设计》笔记</a></li><li class="dropdown-subitem"><a href="/study_blog/note/es6/" class="nav-link">《ES6 教程》笔记</a></li><li class="dropdown-subitem"><a href="/study_blog/note/vue/" class="nav-link">《Vue》笔记</a></li><li class="dropdown-subitem"><a href="/study_blog/note/react/" class="nav-link">《React》笔记</a></li><li class="dropdown-subitem"><a href="/study_blog/note/typescript-axios/" class="nav-link">《TypeScript 从零实现 axios》</a></li><li class="dropdown-subitem"><a href="/study_blog/note/git/" class="nav-link">《Git》学习笔记</a></li><li class="dropdown-subitem"><a href="/study_blog/pages/51afd6/" class="nav-link">TypeScript笔记</a></li><li class="dropdown-subitem"><a href="/study_blog/pages/4643cd/" class="nav-link">JS设计模式总结笔记</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="页面" class="dropdown-title"><a href="/study_blog/ui/" class="link-title">页面</a> <span class="title" style="display:none;">页面</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study_blog/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/study_blog/pages/c8f128/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/study_blog/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study_blog/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/study_blog/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="待学" class="dropdown-title"><a href="/study_blog/notstudy/" class="link-title">待学</a> <span class="title" style="display:none;">待学</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study_blog/pages/" class="nav-link router-link-active">React</a></li><li class="dropdown-item"><!----> <a href="/study_blog/pages/4429f0/" class="nav-link">Vue3</a></li><li class="dropdown-item"><!----> <a href="/study_blog/pages/b39b59/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/study_blog/pages/" class="nav-link router-link-active">Nestjs</a></li><li class="dropdown-item"><!----> <a href="/study_blog/pages/" class="nav-link router-link-active">vue源码解析</a></li><li class="dropdown-item"><!----> <a href="/study_blog/pages/" class="nav-link router-link-active">React源码解析</a></li><li class="dropdown-item"><!----> <a href="/study_blog/pages/7cf21f/" class="nav-link">ES6</a></li><li class="dropdown-item"><!----> <a href="/study_blog/pages/c3f6c9/" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/study_blog/pages/97683a/" class="nav-link">typescript</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/study_blog/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study_blog/pages/" class="nav-link router-link-active">npm库</a></li><li class="dropdown-item"><!----> <a href="/study_blog/pages/" class="nav-link router-link-active">面试</a></li><li class="dropdown-item"><!----> <a href="/study_blog/pages/" class="nav-link router-link-active">算法</a></li><li class="dropdown-item"><!----> <a href="/study_blog/pages/7fc8ce/" class="nav-link">杂项</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/study_blog/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study_blog/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/study_blog/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/study_blog/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/zsw1244/study_blog.git" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://cdn.jsdelivr.net/gh/xugaoyi/image_store/blog/20200103123203.jpg"> <div class="blogger-info"><h3>囚徒</h3> <span>混子</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/study_blog/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/study_blog/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/study_blog/pages/8143cc480faf9a11/" class="nav-link">JavaScript</a></li><li class="dropdown-subitem"><a href="/study_blog/pages/5d463fbdb172d43b/" class="nav-link">Vue</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/study_blog/note/javascript/" class="nav-link">《JavaScript教程》笔记</a></li><li class="dropdown-subitem"><a href="/study_blog/note/js/" class="nav-link">《JavaScript高级程序设计》笔记</a></li><li class="dropdown-subitem"><a href="/study_blog/note/es6/" class="nav-link">《ES6 教程》笔记</a></li><li class="dropdown-subitem"><a href="/study_blog/note/vue/" class="nav-link">《Vue》笔记</a></li><li class="dropdown-subitem"><a href="/study_blog/note/react/" class="nav-link">《React》笔记</a></li><li class="dropdown-subitem"><a href="/study_blog/note/typescript-axios/" class="nav-link">《TypeScript 从零实现 axios》</a></li><li class="dropdown-subitem"><a href="/study_blog/note/git/" class="nav-link">《Git》学习笔记</a></li><li class="dropdown-subitem"><a href="/study_blog/pages/51afd6/" class="nav-link">TypeScript笔记</a></li><li class="dropdown-subitem"><a href="/study_blog/pages/4643cd/" class="nav-link">JS设计模式总结笔记</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="页面" class="dropdown-title"><a href="/study_blog/ui/" class="link-title">页面</a> <span class="title" style="display:none;">页面</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study_blog/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/study_blog/pages/c8f128/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/study_blog/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study_blog/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/study_blog/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="待学" class="dropdown-title"><a href="/study_blog/notstudy/" class="link-title">待学</a> <span class="title" style="display:none;">待学</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study_blog/pages/" class="nav-link router-link-active">React</a></li><li class="dropdown-item"><!----> <a href="/study_blog/pages/4429f0/" class="nav-link">Vue3</a></li><li class="dropdown-item"><!----> <a href="/study_blog/pages/b39b59/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/study_blog/pages/" class="nav-link router-link-active">Nestjs</a></li><li class="dropdown-item"><!----> <a href="/study_blog/pages/" class="nav-link router-link-active">vue源码解析</a></li><li class="dropdown-item"><!----> <a href="/study_blog/pages/" class="nav-link router-link-active">React源码解析</a></li><li class="dropdown-item"><!----> <a href="/study_blog/pages/7cf21f/" class="nav-link">ES6</a></li><li class="dropdown-item"><!----> <a href="/study_blog/pages/c3f6c9/" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/study_blog/pages/97683a/" class="nav-link">typescript</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/study_blog/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study_blog/pages/" class="nav-link router-link-active">npm库</a></li><li class="dropdown-item"><!----> <a href="/study_blog/pages/" class="nav-link router-link-active">面试</a></li><li class="dropdown-item"><!----> <a href="/study_blog/pages/" class="nav-link router-link-active">算法</a></li><li class="dropdown-item"><!----> <a href="/study_blog/pages/7fc8ce/" class="nav-link">杂项</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/study_blog/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study_blog/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/study_blog/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/study_blog/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/zsw1244/study_blog.git" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue3</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Nodejs</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/study_blog/pages/b39b59/" class="sidebar-link">什么是node</a></li><li><a href="/study_blog/pages/b263b6/" class="sidebar-link">yarn</a></li><li><a href="/study_blog/pages/7bc4c2/" aria-current="page" class="active sidebar-link">Express</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/study_blog/pages/404594/" class="sidebar-link">koa</a></li><li><a href="/study_blog/pages/404595/" class="sidebar-link">mongodb</a></li><li><a href="/study_blog/pages/e125fe/" class="sidebar-link">中间层</a></li><li><a href="/study_blog/pages/7f0f0d/" class="sidebar-link">事件循环和异步处理</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Nestjs</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue源码解析</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React源码解析</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ES6</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>typescript</span> <span class="arrow right"></span></p> <!----></section></li></ul> <div class="sidebar-slot sidebar-slot-bottom"><!-- 正方形 -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="3508773082"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div></aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-1cd794fe><div class="articleInfo" data-v-1cd794fe><ul class="breadcrumbs" data-v-1cd794fe><li data-v-1cd794fe><a href="/study_blog/" title="首页" class="iconfont icon-home router-link-active" data-v-1cd794fe></a></li> <li data-v-1cd794fe><a href="/study_blog/notstudy" title="待学-目录页" data-v-1cd794fe>待学</a></li> <li data-v-1cd794fe><a href="/study_blog/notstudy/#Nodejs" title="待学#Nodejs" data-v-1cd794fe>Nodejs</a></li> <!----></ul> <div class="info" data-v-1cd794fe><div title="作者" class="author iconfont icon-touxiang" data-v-1cd794fe><a href="https://gitee.com/zhao_sheng_wei" target="_blank" title="作者" class="beLink" data-v-1cd794fe>囚徒</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-1cd794fe><a href="javascript:;" data-v-1cd794fe>2021-06-02</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">
          Express
        </h1> <div class="page-slot page-slot-top"><!-- 固定100% * 90px可显示，max-height:90px未见显示-->
     <ins class="adsbygoogle"
          style="display:inline-block;width:100%;max-height:90px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6625304284"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="theme-vdoing-content content__default"><h1 id="express"><a href="#express" class="header-anchor">#</a> <strong>Express</strong></h1> <p><strong>基于 Node.js 平台，快速、开放、极简的 web 开发框架。</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>$ npm install express --save
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="一、特色"><a href="#一、特色" class="header-anchor">#</a> <strong>一、特色</strong></h3> <h4 id="_1、web-应用"><a href="#_1、web-应用" class="header-anchor">#</a> <strong>1、Web 应用</strong></h4> <p><strong>Express 是一个基于 Node.js 平台的极简、灵活的 web 应用开发框架，它提供一系列强大的特性，帮助你创建各种 Web 和移动设备应用。</strong></p> <h4 id="_2、api"><a href="#_2、api" class="header-anchor">#</a> <strong>2、API</strong></h4> <p><strong>丰富的 HTTP 快捷方法和任意排列组合的 Connect 中间件，让你创建健壮、友好的 API 变得既快速又简单。</strong></p> <h4 id="_3、性能"><a href="#_3、性能" class="header-anchor">#</a> <strong>3、性能</strong></h4> <p><strong>Express 不对 Node.js 已有的特性进行二次抽象，我们只是在它之上扩展了 Web 应用所需的基本功能。</strong></p> <h3 id="二、安装"><a href="#二、安装" class="header-anchor">#</a> <strong>二、安装</strong></h3> <p><strong>首先假定你已经安装了 Node.js，接下来为你的应用创建一个目录，然后进入此目录并将其作为当前工作目录。</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>$ mkdir myapp
$ cd myapp
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>通过 npm init 命令为你的应用创建一个 package.json 文件。 欲了解 package.json 是如何起作用的，请参考 Specifics of npm’s package.json handling。</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>$ npm init
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>此命令将要求你输入几个参数，例如此应用的名称和版本。 你可以直接按“回车”键接受默认设置即可，下面这个除外：</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>entry point: (index.js)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>键入 app.js 或者你所希望的名称，这是当前应用的入口文件。如果你希望采用默认的 index.js 文件名，只需按“回车”键即可。</strong></p> <p><strong>接下来安装 Express 并将其保存到依赖列表中：</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>$ npm install express --save
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>如果只是临时安装 Express，不想将它添加到依赖列表中，只需略去 --save 参数即可：</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>$ npm install express
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p><strong>安装 Node 模块时，如果指定了 --save 参数，那么此模块将被添加到 package.json 文件中 dependencies 依赖列表中。 然后通过 npm install 命令即可自动安装依赖列表中所列出的所有模块。</strong></p></blockquote> <h3 id="三、hello-world-实例"><a href="#三、hello-world-实例" class="header-anchor">#</a> <strong>三、Hello world 实例</strong></h3> <p><strong>接下来，我们一起创建一个基本的 Express 应用。</strong></p> <p><strong>注意：这里所创建是一个最最简单的 Express 应用，并且仅仅只有一个文件 — 和通过 Express 应用生成器 所创建的应用</strong><em><strong>完全不一样</strong></em>**，Express 应用生成器所创建的应用框架包含多 JavaScript 文件、Jade 模板和针对不同用途的子目录。**</p> <p><strong>进入 myapp 目录，创建一个名为 app.js 的文件，然后将下列代码复制进去：</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var express = require('express');
var app = express();

app.get('/', function (req, res) {
  res.send('Hello World!');
});

var server = app.listen(3000, function () {
  var host = server.address().address;
  var port = server.address().port;

  console.log('Example app listening at http://%s:%s', host, port);
});
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><strong>上面的代码启动一个服务并监听从 3000 端口进入的所有连接请求。他将对所有 (/) URL 或 路由 返回 “Hello World!” 字符串。对于其他所有路径全部返回 404 Not Found。</strong></p> <blockquote><p><strong>req (请求) 和 res (响应) 与 Node 提供的对象完全一致，因此，你可以调用 req.pipe()、req.on('data', callback) 以及任何 Node 提供的方法。</strong></p></blockquote> <p><strong>通过如下命令启动此应用：</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>$ node app.js
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>然后在浏览器中打开 <strong><a href="http://localhost:3000/" target="_blank" rel="noopener noreferrer">http://localhost:3000/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong> 并查看输出结果。</strong></p> <h3 id="四、路由"><a href="#四、路由" class="header-anchor">#</a> <strong>四、路由</strong></h3> <p><strong>路由是指如何定义应用的端点（URIs）以及如何响应客户端的请求。</strong></p> <p><strong>路由是由一个 URI、HTTP 请求（GET、POST等）和若干个句柄组成，它的结构如下： app.METHOD(path, [callback...], callback)， app 是 express 对象的一个实例， METHOD 是一个 HTTP 请求方法， path 是服务器上的路径， callback 是当路由匹配时要执行的函数。</strong></p> <p><strong>下面是一个基本的路由示例：</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var express = require('express');
var app = express();

// respond with &quot;hello world&quot; when a GET request is made to the homepage
app.get('/', function(req, res) {
  res.send('hello world');
});
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_1、路由方法"><a href="#_1、路由方法" class="header-anchor">#</a> <strong>1、路由方法</strong></h4> <p><strong>路由方法源于 HTTP 请求方法，和 express 实例相关联。</strong></p> <p><strong>下面这个例子展示了为应用跟路径定义的 GET 和 POST 请求：</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>// GET method route
// 对网站首页的访问返回 &quot;Hello World!&quot; 字样
app.get('/', function (req, res) {
  res.send('Hello World!')
})

// 网站首页接受 POST 请求
app.post('/', function (req, res) {
  res.send('Got a POST request')
})

// /user 节点接受 PUT 请求
app.put('/user', function (req, res) {
  res.send('Got a PUT request at /user')
})

// /user 节点接受 DELETE 请求
app.delete('/user', function (req, res) {
  res.send('Got a DELETE request at /user')
})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p><strong>Express 定义了如下和 HTTP 请求对应的路由方法： get, post, put, head, delete, options, trace, copy, lock, mkcol, move, purge, propfind, proppatch, unlock, report, mkactivity, checkout, merge, m-search, notify, subscribe, unsubscribe, patch, search, 和 connect。</strong></p> <blockquote><p><strong>有些路由方法名不是合规的 JavaScript 变量名，此时使用括号记法，比如： app['m-search']('/', function ...</strong></p></blockquote> <p><strong>app.all() 是一个特殊的路由方法，没有任何 HTTP 方法与其对应，它的作用是对于一个路径上的所有请求加载中间件。</strong></p> <p><strong>在下面的例子中，来自 “/secret” 的请求，不管使用 GET、POST、PUT、DELETE 或其他任何 http 模块支持的 HTTP 请求，句柄都会得到执行。</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>app.all('/secret', function (req, res, next) {
  console.log('Accessing the secret section ...')
  next(); // pass control to the next handler
})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_2、路由路径"><a href="#_2、路由路径" class="header-anchor">#</a> <strong>2、路由路径</strong></h4> <p><strong>路由路径和请求方法一起定义了请求的端点，它可以是字符串、字符串模式或者正则表达式。</strong></p> <p><strong>Express 使用 path-to-regexp 匹配路由路径，请参考文档查阅所有定义路由路径的方法。 Express Route Tester 是测试基本 Express 路径的好工具，但不支持模式匹配。</strong></p> <blockquote><p><strong>查询字符串不是路由路径的一部分。</strong></p></blockquote> <p><strong>使用字符串的路由路径示例：</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>// 匹配根路径的请求
app.get('/', function (req, res) {
  res.send('root');
});

// 匹配 /about 路径的请求
app.get('/about', function (req, res) {
  res.send('about');
});

// 匹配 /random.text 路径的请求
app.get('/random.text', function (req, res) {
  res.send('random.text');
});
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><strong>使用字符串模式的路由路径示例：</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>// 匹配 acd 和 abcd
app.get('/ab?cd', function(req, res) {
  res.send('ab?cd');
});

// 匹配 abcd、abbcd、abbbcd等
app.get('/ab+cd', function(req, res) {
  res.send('ab+cd');
});

// 匹配 abcd、abxcd、abRABDOMcd、ab123cd等
app.get('/ab*cd', function(req, res) {
  res.send('ab*cd');
});

// 匹配 /abe 和 /abcde
app.get('/ab(cd)?e', function(req, res) {
 res.send('ab(cd)?e');
});
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><blockquote><p><em><em>字符 ?、+、</em> 和 () 是正则表达式的子集，- 和 . 在基于字符串的路径中按照字面值解释。</em>*</p></blockquote> <p><strong>使用正则表达式的路由路径示例：</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>// 匹配任何路径中含有 a 的路径：
app.get(/a/, function(req, res) {
  res.send('/a/');
});

// 匹配 butterfly、dragonfly，不匹配 butterflyman、dragonfly man等
app.get(/.*fly$/, function(req, res) {
  res.send('/.*fly$/');
});
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="_3、路由句柄"><a href="#_3、路由句柄" class="header-anchor">#</a> <strong>3、路由句柄</strong></h4> <p><strong>可以为请求处理提供多个回调函数，其行为类似 中间件。唯一的区别是这些回调函数有可能调用 next('route') 方法而略过其他路由回调函数。可以利用该机制为路由定义前提条件，如果在现有路径上继续执行没有意义，则可将控制权交给剩下的路径。</strong></p> <p><strong>路由句柄有多种形式，可以是一个函数、一个函数数组，或者是两者混合，如下所示.</strong></p> <p><strong>使用一个回调函数处理路由：</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>app.get('/example/a', function (req, res) {
  res.send('Hello from A!');
});
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>使用多个回调函数处理路由（记得指定 next 对象）：</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>app.get('/example/b', function (req, res, next) {
  console.log('response will be sent by the next function ...');
  next();
}, function (req, res) {
  res.send('Hello from B!');
});
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>使用回调函数数组处理路由：</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var cb0 = function (req, res, next) {
  console.log('CB0')
  next()
}

var cb1 = function (req, res, next) {
  console.log('CB1')
  next()
}

var cb2 = function (req, res) {
  res.send('Hello from C!')
}

app.get('/example/c', [cb0, cb1, cb2])
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><strong>混合使用函数和函数数组处理路由：</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var cb0 = function (req, res, next) {
  console.log('CB0')
  next()
}

var cb1 = function (req, res, next) {
  console.log('CB1')
  next()
}

app.get('/example/d', [cb0, cb1], function (req, res, next) {
  console.log('response will be sent by the next function ...')
  next()
}, function (req, res) {
  res.send('Hello from D!')
})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h4 id="_4、响应方法"><a href="#_4、响应方法" class="header-anchor">#</a> <strong>4、响应方法</strong></h4> <p><strong>下表中响应对象（res）的方法向客户端返回响应，终结请求响应的循环。如果在路由句柄中一个方法也不调用，来自客户端的请求会一直挂起。</strong></p> <table><thead><tr><th><strong>方法</strong></th> <th><strong>描述</strong></th></tr></thead> <tbody><tr><td><strong>res.download()</strong></td> <td><strong>提示下载文件。</strong></td></tr> <tr><td><strong>res.end()</strong></td> <td><strong>终结响应处理流程。</strong></td></tr> <tr><td><strong>res.json()</strong></td> <td><strong>发送一个 JSON 格式的响应。</strong></td></tr> <tr><td><strong>res.jsonp()</strong></td> <td><strong>发送一个支持 JSONP 的 JSON 格式的响应。</strong></td></tr> <tr><td><strong>res.redirect()</strong></td> <td><strong>重定向请求。</strong></td></tr> <tr><td><strong>res.render()</strong></td> <td><strong>渲染视图模板。</strong></td></tr> <tr><td><strong>res.send()</strong></td> <td><strong>发送各种类型的响应。</strong></td></tr> <tr><td><strong>res.sendFile</strong></td> <td><strong>以八位字节流的形式发送文件。</strong></td></tr> <tr><td><strong>res.sendStatus()</strong></td> <td><strong>设置响应状态代码，并将其以字符串形式作为响应体的一部分发送。</strong></td></tr></tbody></table> <h4 id="_5、app-route"><a href="#_5、app-route" class="header-anchor">#</a> <strong>5、app.route()</strong></h4> <p><strong>可使用 app.route() 创建路由路径的链式路由句柄。由于路径在一个地方指定，这样做有助于创建模块化的路由，而且减少了代码冗余和拼写错误。</strong></p> <p><strong>下面这个示例程序使用 app.route() 定义了链式路由句柄。</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>app.route('/book')
  .get(function(req, res) {
    res.send('Get a random book');
  })
  .post(function(req, res) {
    res.send('Add a book');
  })
  .put(function(req, res) {
    res.send('Update the book');
  });
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="_6、express-router"><a href="#_6、express-router" class="header-anchor">#</a> <strong>6、express.Router</strong></h4> <p><strong>可使用 express.Router 类创建模块化、可挂载的路由句柄。Router 实例是一个完整的中间件和路由系统，因此常称其为一个 “mini-app”。</strong></p> <p><strong>下面的实例程序创建了一个路由模块，并加载了一个中间件，定义了一些路由，并且将它们挂载至应用的路径上。</strong></p> <p><strong>在 app 目录下创建名为 birds.js 的文件，内容如下：</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var express = require('express');
var router = express.Router();

// 该路由使用的中间件
router.use(function timeLog(req, res, next) {
  console.log('Time: ', Date.now());
  next();
});
// 定义网站主页的路由
router.get('/', function(req, res) {
  res.send('Birds home page');
});
// 定义 about 页面的路由
router.get('/about', function(req, res) {
  res.send('About birds');
});

module.exports = router;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><strong>然后在应用中加载路由模块：</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var birds = require('./birds')
...
app.use('/birds', birds)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>应用即可处理发自 /birds 和 /birds/about 的请求，并且调用为该路由指定的 timeLog 中间件。</strong></p> <h3 id="五、利用-express-托管静态文件"><a href="#五、利用-express-托管静态文件" class="header-anchor">#</a> <strong>五、利用 Express 托管静态文件</strong></h3> <p><strong>通过 Express 内置的 express.static 可以方便地托管静态文件，例如图片、CSS、JavaScript 文件等。</strong></p> <p><strong>将静态资源文件所在的目录作为参数传递给 express.static 中间件就可以提供静态资源文件的访问了。例如，假设在 public 目录放置了图片、CSS 和 JavaScript 文件，你就可以：</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>app.use(express.static('public'))
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>现在，public 目录下面的文件就可以访问了。</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>http://localhost:3000/images/kitten.jpg
http://localhost:3000/css/style.css
http://localhost:3000/js/app.js
http://localhost:3000/images/bg.png
http://localhost:3000/hello.html
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p><strong>所有文件的路径都是相对于存放目录的，因此，存放静态文件的目录名不会出现在 URL 中。</strong></p></blockquote> <p><strong>如果你的静态资源存放在多个目录下面，你可以多次调用 express.static 中间件：</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>app.use(express.static('public'))
app.use(express.static('files'))
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>访问静态资源文件时，express.static 中间件会根据目录添加的顺序查找所需的文件。</strong></p> <p><strong>如果你希望所有通过 express.static 访问的文件都存放在一个“虚拟（virtual）”目录（即目录根本不存在）下面，可以通过为静态资源目录指定一个挂载路径的方式来实现，如下所示：</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>app.use('/static', express.static('public'))
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>现在，你就可以通过带有 “/static” 前缀的地址来访问 public 目录下面的文件了。</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>http://localhost:3000/static/images/kitten.jpg
http://localhost:3000/static/css/style.css
http://localhost:3000/static/js/app.js
http://localhost:3000/static/images/bg.png
http://localhost:3000/static/hello.html
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="六、使用中间件"><a href="#六、使用中间件" class="header-anchor">#</a> <strong>六、使用中间件</strong></h3> <p><strong>Express 是一个自身功能极简，完全是由路由和中间件构成一个的 web 开发框架：从本质上来说，一个 Express 应用就是在调用各种中间件。</strong></p> <p><strong>中间件（Middleware） 是一个函数，它可以访问请求对象（request object (req)）, 响应对象（response object (res)）, 和 web 应用中处于请求-响应循环流程中的中间件，一般被命名为 next 的变量。</strong></p> <p><strong>中间件的功能包括：</strong></p> <ul><li><strong>执行任何代码。</strong></li> <li><strong>修改请求和响应对象。</strong></li> <li><strong>终结请求-响应循环。</strong></li> <li><strong>调用堆栈中的下一个中间件。</strong></li></ul> <p><strong>如果当前中间件没有终结请求-响应循环，则必须调用 next() 方法将控制权交给下一个中间件，否则请求就会挂起。</strong></p> <p><strong>Express 应用可使用如下几种中间件：</strong></p> <ul><li><strong>应用级中间件</strong></li> <li><strong>路由级中间件</strong></li> <li><strong>错误处理中间件</strong></li> <li><strong>内置中间件</strong></li> <li><strong>第三方中间件</strong></li></ul> <p><strong>使用可选则挂载路径，可在应用级别或路由级别装载中间件。另外，你还可以同时装在一系列中间件函数，从而在一个挂载点上创建一个子中间件栈。</strong></p> <h4 id="_1、应用级中间件"><a href="#_1、应用级中间件" class="header-anchor">#</a> <strong>1、应用级中间件</strong></h4> <p><strong>应用级中间件绑定到 app 对象 使用 app.use() 和 app.METHOD()， 其中， METHOD 是需要处理的 HTTP 请求的方法，例如 GET, PUT, POST 等等，全部小写。例如：</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var app = express()

// 没有挂载路径的中间件，应用的每个请求都会执行该中间件
app.use(function (req, res, next) {
  console.log('Time:', Date.now())
  next()
})

// 挂载至 /user/:id 的中间件，任何指向 /user/:id 的请求都会执行它
app.use('/user/:id', function (req, res, next) {
  console.log('Request Type:', req.method)
  next()
})

// 路由和句柄函数(中间件系统)，处理指向 /user/:id 的 GET 请求
app.get('/user/:id', function (req, res, next) {
  res.send('USER')
})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><strong>下面这个例子展示了在一个挂载点装载一组中间件。</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>// 一个中间件栈，对任何指向 /user/:id 的 HTTP 请求打印出相关信息
app.use('/user/:id', function(req, res, next) {
  console.log('Request URL:', req.originalUrl)
  next()
}, function (req, res, next) {
  console.log('Request Type:', req.method)
  next()
})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>作为中间件系统的路由句柄，使得为路径定义多个路由成为可能。在下面的例子中，为指向 /user/:id 的 GET 请求定义了两个路由。第二个路由虽然不会带来任何问题，但却永远不会被调用，因为第一个路由已经终止了请求-响应循环。</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>// 一个中间件栈，处理指向 /user/:id 的 GET 请求
app.get('/user/:id', function (req, res, next) {
  console.log('ID:', req.params.id)
  next()
}, function (req, res, next) {
  res.send('User Info')
})

// 处理 /user/:id， 打印出用户 id
app.get('/user/:id', function (req, res, next) {
  res.end(req.params.id)
})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><strong>如果需要在中间件栈中跳过剩余中间件，调用 next('route') 方法将控制权交给下一个路由。 注意： next('route') 只对使用 app.VERB() 或 router.VERB() 加载的中间件有效。</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>// 一个中间件栈，处理指向 /user/:id 的 GET 请求
app.get('/user/:id', function (req, res, next) {
  // 如果 user id 为 0, 跳到下一个路由
  if (req.params.id == 0) next('route')
  // 否则将控制权交给栈中下一个中间件
  else next() //
}, function (req, res, next) {
  // 渲染常规页面
  res.render('regular')
});

// 处理 /user/:id， 渲染一个特殊页面
app.get('/user/:id', function (req, res, next) {
  res.render('special')
})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h4 id="_2、路由级中间件"><a href="#_2、路由级中间件" class="header-anchor">#</a> <strong>2、路由级中间件</strong></h4> <p><strong>路由级中间件和应用级中间件一样，只是它绑定的对象为 express.Router()。</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var router = express.Router()
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>路由级使用 router.use() 或 router.VERB() 加载。</strong></p> <p><strong>上述在应用级创建的中间件系统，可通过如下代码改写为路由级：</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var app = express()
var router = express.Router()

// 没有挂载路径的中间件，通过该路由的每个请求都会执行该中间件
router.use(function (req, res, next) {
  console.log('Time:', Date.now())
  next()
})

// 一个中间件栈，显示任何指向 /user/:id 的 HTTP 请求的信息
router.use('/user/:id', function(req, res, next) {
  console.log('Request URL:', req.originalUrl)
  next()
}, function (req, res, next) {
  console.log('Request Type:', req.method)
  next()
})

// 一个中间件栈，处理指向 /user/:id 的 GET 请求
router.get('/user/:id', function (req, res, next) {
  // 如果 user id 为 0, 跳到下一个路由
  if (req.params.id == 0) next('route')
  // 负责将控制权交给栈中下一个中间件
  else next() //
}, function (req, res, next) {
  // 渲染常规页面
  res.render('regular')
})

// 处理 /user/:id， 渲染一个特殊页面
router.get('/user/:id', function (req, res, next) {
  console.log(req.params.id)
  res.render('special')
})

// 将路由挂载至应用
app.use('/', router)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><h3 id="_3、错误处理中间件"><a href="#_3、错误处理中间件" class="header-anchor">#</a> <strong>3、错误处理中间件</strong></h3> <blockquote><p><strong>错误处理中间件有 4 个参数，定义错误处理中间件时必须使用这 4 个参数。即使不需要 next 对象，也必须在签名中声明它，否则中间件会被识别为一个常规中间件，不能处理错误。</strong></p></blockquote> <p><strong>错误处理中间件和其他中间件定义类似，只是要使用 4 个参数，而不是 3 个，其签名如下： (err, req, res, next)。</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>app.use(function(err, req, res, next) {
  console.error(err.stack)
  res.status(500).send('Something broke!')
})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_4、内置中间件"><a href="#_4、内置中间件" class="header-anchor">#</a> <strong>4、内置中间件</strong></h3> <p><strong>从 4.x 版本开始，, Express 已经不再依赖 Connect 了。除了 express.static, Express 以前内置的中间件现在已经全部单独作为模块安装使用了。请参考 中间件列表。</strong></p> <p><strong><strong>express.static(root, [options])</strong></strong></p> <p><strong>express.static 是 Express 唯一内置的中间件。它基于 serve-static，负责在 Express 应用中提托管静态资源。</strong></p> <p><strong>参数 root 指提供静态资源的根目录。</strong></p> <p><strong>可选的 options 参数拥有如下属性。</strong></p> <table><thead><tr><th><strong>属性</strong></th> <th><strong>描述</strong></th> <th><strong>类型</strong></th> <th><strong>缺省值</strong></th></tr></thead> <tbody><tr><td><strong>dotfiles</strong></td> <td><strong>是否对外输出文件名以点（.）开头的文件。可选值为 “allow”、“deny” 和 “ignore”</strong></td> <td><strong>String</strong></td> <td><strong>“ignore”</strong></td></tr> <tr><td><strong>etag</strong></td> <td><strong>是否启用 etag 生成</strong></td> <td><strong>Boolean</strong></td> <td><strong>true</strong></td></tr> <tr><td><strong>extensions</strong></td> <td><strong>设置文件扩展名备份选项</strong></td> <td><strong>Array</strong></td> <td><strong>[]</strong></td></tr> <tr><td><strong>index</strong></td> <td><strong>发送目录索引文件，设置为 false 禁用目录索引。</strong></td> <td><strong>Mixed</strong></td> <td><strong>“index.html”</strong></td></tr> <tr><td><strong>lastModified</strong></td> <td><strong>设置 Last-Modified 头为文件在操作系统上的最后修改日期。可能值为 true 或 false。</strong></td> <td><strong>Boolean</strong></td> <td><strong>true</strong></td></tr> <tr><td><strong>maxAge</strong></td> <td><strong>以毫秒或者其字符串格式设置 Cache-Control 头的 max-age 属性。</strong></td> <td><strong>Number</strong></td> <td><strong>0</strong></td></tr> <tr><td><strong>redirect</strong></td> <td><strong>当路径为目录时，重定向至 “/”。</strong></td> <td><strong>Boolean</strong></td> <td><strong>true</strong></td></tr> <tr><td><strong>setHeaders</strong></td> <td><strong>设置 HTTP 头以提供文件的函数。</strong></td> <td><strong>Function</strong></td> <td></td></tr></tbody></table> <p><strong>下面的例子使用了 express.static 中间件，其中的 options 对象经过了精心的设计。</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var options = {
  dotfiles: 'ignore',
  etag: false,
  extensions: ['htm', 'html'],
  index: false,
  maxAge: '1d',
  redirect: false,
  setHeaders: function (res, path, stat) {
    res.set('x-timestamp', Date.now())
  }
}

app.use(express.static('public', options))
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><strong>每个应用可有多个静态目录。</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>app.use(express.static('public'))
app.use(express.static('uploads'))
app.use(express.static('files'))
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="_5、第三方中间件"><a href="#_5、第三方中间件" class="header-anchor">#</a> <strong>5、第三方中间件</strong></h4> <p><strong>通过使用第三方中间件从而为 Express 应用增加更多功能。</strong></p> <p><strong>安装所需功能的 node 模块，并在应用中加载，可以在应用级加载，也可以在路由级加载。</strong></p> <p><strong>下面的例子安装并加载了一个解析 cookie 的中间件： cookie-parser</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>$ npm install cookie-parser
var express = require('express')
var app = express()
var cookieParser = require('cookie-parser')

// 加载用于解析 cookie 的中间件
app.use(cookieParser())
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="七、在-express-中使用模板引擎"><a href="#七、在-express-中使用模板引擎" class="header-anchor">#</a> <strong>七、在 Express 中使用模板引擎</strong></h3> <p><strong>需要在应用中进行如下设置才能让 Express 渲染模板文件：</strong></p> <ul><li><strong>views, 放模板文件的目录，比如： app.set('views', './views')</strong></li> <li><strong>view engine, 模板引擎，比如： app.set('view engine', 'ejs')</strong></li></ul> <h4 id="art-template"><a href="#art-template" class="header-anchor">#</a> <strong>art-template</strong></h4> <p><strong>art-template for express 4.x.</strong></p> <h5 id="_1、install"><a href="#_1、install" class="header-anchor">#</a> <strong>1、Install</strong></h5> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm install --save art-template
npm install --save express-art-template
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h5 id="_2、example"><a href="#_2、example" class="header-anchor">#</a> <strong>2、Example</strong></h5> <div class="language- line-numbers-mode"><pre class="language-text"><code>var express = require('express')
var app = express()

// view engine setup
app.engine('art', require('express-art-template'))
app.set('view', {
    debug: process.env.NODE_ENV !== 'production'
})
app.set('views', path.join(__dirname, 'views'))
app.set('view engine', 'art')

// routes
app.get('/', function (req, res) {
    res.render('index.art', {
        user: {
            name: 'aui',
            tags: ['art', 'template', 'nodejs']
        }
    })
})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div></div></div> <div class="page-slot page-slot-bottom"><!-- 横向自适应 -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6620245489"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="page-edit"><!----> <!----> <!----></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/study_blog/pages/b263b6/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">yarn</div></a> <a href="/study_blog/pages/404594/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">koa</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/study_blog/pages/b263b6/" class="prev">yarn</a></span> <span class="next"><a href="/study_blog/pages/404594/">koa</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/study_blog/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/study_blog/pages/7b12c6/"><div>对象的创建</div></a> <span>06-03</span></dt></dl><dl><dd>02</dd> <dt><a href="/study_blog/pages/7fc8ce/"><div>webpack5的使用</div></a> <span>06-02</span></dt></dl><dl><dd>03</dd> <dt><a href="/study_blog/pages/97683a/"><div>总结</div></a> <span>06-02</span></dt></dl> <dl><dd></dd> <dt><a href="/study_blog/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:894072666@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://gitee.com/zhao_sheng_wei" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=755597173" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2021-2021
    <span>Evan Xu | <a href="https://gitee.com/zhao_sheng_wei/vuepress-theme-vdoing/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <div class="custom-html-window custom-html-window-rb" style="display:;"><div class="custom-wrapper"><i class="close-but">×</i> <div><!-- 固定160*160px -->
      <ins class="adsbygoogle"
          style="display:inline-block;max-width:160px;max-height:160px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="8377369658"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
      </div></div></div></div><div class="global-ui"><!----></div></div>
    <script src="/study_blog/assets/js/app.3481ffbf.js" defer></script><script src="/study_blog/assets/js/2.acc967ff.js" defer></script><script src="/study_blog/assets/js/64.9406cf50.js" defer></script><script src="/study_blog/assets/js/3.95372aae.js" defer></script>
  </body>
</html>