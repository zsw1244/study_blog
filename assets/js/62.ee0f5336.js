(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{480:function(s,n,a){"use strict";a.r(n);var e=a(22),t=Object(e.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"一、node-js是什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、node-js是什么"}},[s._v("#")]),s._v(" "),a("strong",[s._v("一、Node.js是什么")])]),s._v(" "),a("p",[a("strong",[s._v("Node.js® is a JavaScript runtime built on Chrome's V8 JavaScript engine.")])]),s._v(" "),a("h3",{attrs:{id:"_1、特性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、特性"}},[s._v("#")]),s._v(" "),a("strong",[s._v("1、特性")])]),s._v(" "),a("p",[a("strong",[s._v("Node.js 可以解析JS代码（没有浏览器安全级别的限制）提供很多系统级别的API，如：")])]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("文件的读写 (File System)")])]),s._v(" "),a("li",[a("strong",[s._v("进程的管理 (Process)")])]),s._v(" "),a("li",[a("strong",[s._v("网络通信 (HTTP/HTTPS)")])]),s._v(" "),a("li",[a("strong",[s._v("……")])])]),s._v(" "),a("h3",{attrs:{id:"_2、举例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、举例"}},[s._v("#")]),s._v(" "),a("strong",[s._v("2、举例")])]),s._v(" "),a("h4",{attrs:{id:"_2-1-浏览器安全级别的限制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-浏览器安全级别的限制"}},[s._v("#")]),s._v(" "),a("strong",[s._v("2.1 浏览器安全级别的限制")])]),s._v(" "),a("p",[a("strong",[a("strong",[s._v("Ajax测试")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('<!DOCTYPE html>\n<html lang="en">\n<head>\n  <meta charset="UTF-8">\n  <meta name="viewport" content="width=device-width, initial-scale=1.0">\n  <title>browser-safe-sandbox</title>\n</head>\n<body>\n  <div>browser-safe-sandbox</div>\n  <script>\n    const xhr = new XMLHttpRequest()\n    xhr.open(\'get\', \'https://m.maoyan.com/ajax/moreClassicList?sortId=1&showType=3&limit=10&offset=30&optimus_uuid=A5518FF0AFEC11EAAB158D7AB0D05BBBD74C9789D9F649898982E6542C7DD479&optimus_risk_level=71&optimus_code=10\', false)\n    xhr.send()\n  <\/script>\n</body>\n</html>\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("p",[a("strong",[a("strong",[s._v("浏览器预览")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("browser-sync start --server --files **/* --directory\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"_2-2-文件的读写-file-system"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-文件的读写-file-system"}},[s._v("#")]),s._v(" "),a("strong",[s._v("2.2 文件的读写 (File System)")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const fs = require('fs')\n\nfs.readFile('./ajax.png', 'utf-8', (err, content) => {\n  console.log(content)\n})\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h4",{attrs:{id:"_2-3-进程的管理-process"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-进程的管理-process"}},[s._v("#")]),s._v(" "),a("strong",[s._v("2.3 进程的管理（Process）")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("function main(argv) {\n  console.log(argv)\n}\n\nmain(process.argv.slice(2))\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[a("strong",[a("strong",[s._v("运行")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("node 2.3-process.js argv1 argv2\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"_2-4-网络通信-http-https"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-网络通信-http-https"}},[s._v("#")]),s._v(" "),a("strong",[s._v("2.4 网络通信（HTTP/HTTPS）")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('const http = require("http")\n\nhttp.createServer((req,res) => {\n  res.writeHead(200, {\n    "content-type": "text/plain"\n  })\n  res.write("hello nodejs")\n  res.end()\n}).listen(3000)\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h1",{attrs:{id:"二、node-相关工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、node-相关工具"}},[s._v("#")]),s._v(" "),a("strong",[s._v("二、Node 相关工具")])]),s._v(" "),a("h3",{attrs:{id:"_1、nvm-node-version-manager"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、nvm-node-version-manager"}},[s._v("#")]),s._v(" "),a("strong",[s._v("1、NVM: Node Version Manager")])]),s._v(" "),a("p",[a("strong",[a("strong",[s._v("1.1 Mac 安装 nvm")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("https://github.com/nvm-sh/nvm/blob/master/README.md\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[a("strong",[s._v("1.2 Windows 安装 nvm")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("nvm-windows\nnodist\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"_2、npm-node-package-manager"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、npm-node-package-manager"}},[s._v("#")]),s._v(" "),a("strong",[s._v("2、NPM: Node Package Manager")])]),s._v(" "),a("h4",{attrs:{id:"_2-1-全局安装package"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-全局安装package"}},[s._v("#")]),s._v(" "),a("strong",[s._v("2.1 全局安装package")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ npm install forever --global (-g)\n$ forever\n$ npm uninstall forever --global\n$ forever\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[a("strong",[a("strong",[s._v("全局安装包的目录")])])]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("Mac")]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("/Users/felix/.nvm/versions/node/nvm各个版本/bin/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("strong",[s._v("Windows")]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("C:\\Users\\你的用户名\\AppData\\Roaming\\npm\\node_modules\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])]),s._v(" "),a("h4",{attrs:{id:"_2-2-本地安装package"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-本地安装package"}},[s._v("#")]),s._v(" "),a("strong",[s._v("2.2 本地安装package")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ cd ~/desktop\n$ mkdir gp-project\n$ cd gp-project\n$ npm install 包名\n$ npm list (ls)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h4",{attrs:{id:"_2-3-package-json初始化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-package-json初始化"}},[s._v("#")]),s._v(" "),a("strong",[s._v("2.3 package.json初始化")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ pwd\n$ npm init -y\n$ ls\n$ cat package.json\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h4",{attrs:{id:"_2-4-使用package-json"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-使用package-json"}},[s._v("#")]),s._v(" "),a("strong",[s._v("2.4 使用package.json")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ npm install 包名 --save\n$ cat package.json\n$ npm install lodash --save-dev\n$ cat package.json\n$ rm -rf node_modules\n$ ls\n$ npm install\n$ npm uninstall 包名 --save\n$ npm list | grep 包名\n$ cat package.json\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h4",{attrs:{id:"_2-5-安装指定版本的包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-安装指定版本的包"}},[s._v("#")]),s._v(" "),a("strong",[s._v("2.5 安装指定版本的包")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ pwd\n$ npm list\n$ npm info 包名\n$ npm view 包名 versions\n$ npm install 包名@1.8.0\n$ npm list\n$ npm uninstall 包名\n$ npm list\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h4",{attrs:{id:"_2-6-更新本地安装的包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-6-更新本地安装的包"}},[s._v("#")]),s._v(" "),a("strong",[s._v("2.6 更新本地安装的包")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ npm info 包名\n$ npm view 包名 versions\n$ npm install 包名@1.4.4 --save-dev\n$ npm list | grep gulp\n$ npm outdated //查看过期的包~2.0.0锁定主版本号和次版本号, ^2.0.0表示主版本号 * 表示xx最新版本\n$ npm list | grep gulp\n$ npm update\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h4",{attrs:{id:"_2-7-清除缓存"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-7-清除缓存"}},[s._v("#")]),s._v(" "),a("strong",[s._v("2.7 清除缓存")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("npm cache clean --force\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"_2-8-上传自己的包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-8-上传自己的包"}},[s._v("#")]),s._v(" "),a("strong",[s._v("2.8 上传自己的包")])]),s._v(" "),a("h6",{attrs:{id:"_2-8-1-编写模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-8-1-编写模块"}},[s._v("#")]),s._v(" "),a("strong",[s._v("2.8.1 编写模块")])]),s._v(" "),a("p",[a("strong",[s._v("保存为index.js")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("exports.sayHello = function(){ \n  return 'Hello World'; \n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h6",{attrs:{id:"_2-8-2-初始化包描述文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-8-2-初始化包描述文件"}},[s._v("#")]),s._v(" "),a("strong",[s._v("2.8.2 初始化包描述文件")])]),s._v(" "),a("p",[a("strong",[s._v("$ npm init package.json")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('{ \n  "name": "gp19-npm", \n  "version": "1.0.1", \n  "description": "gp19 self module", \n  "main": "index.js",\n  "scripts": { \n    "test": "make test" \n  }, \n  "repository": { \n    "type": "Git", \n    "url": "git+https://github.com/lurongtao/gp19-npm.git" \n  }, \n  "keywords": [ \n    "demo" \n  ], \n  "author": "Felixlu", \n  "license": "ISC", \n  "bugs": { \n    "url": "https://github.com/lurongtao/gp19-npm/issues" \n  }, \n  "homepage": "https://github.com/lurongtao/gp19-npm#readme", \n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br")])]),a("h6",{attrs:{id:"_2-8-3-注册npm仓库账号"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-8-3-注册npm仓库账号"}},[s._v("#")]),s._v(" "),a("strong",[s._v("2.8.3 注册npm仓库账号")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("https://www.npmjs.com 上面的账号\nfelix_lurt/qqmko09ijn\n$ npm adduser\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h6",{attrs:{id:"_2-8-4-上传包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-8-4-上传包"}},[s._v("#")]),s._v(" "),a("strong",[s._v("2.8.4 上传包")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ npm publish\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("坑：403 Forbidden")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("查看npm源：npm config get registry\n切换npm源方法一：npm config set registry http://registry.npmjs.org\n切换npm源方法二：nrm use npm\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h6",{attrs:{id:"_2-8-5-安装包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-8-5-安装包"}},[s._v("#")]),s._v(" "),a("strong",[s._v("2.8.5 安装包")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ npm install gp19-npm\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h6",{attrs:{id:"_2-8-6-卸载包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-8-6-卸载包"}},[s._v("#")]),s._v(" "),a("strong",[s._v("2.8.6 卸载包")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("查看当前项目引用了哪些包 ：\nnpm ls\n卸载包：\nnpm unpublish --force\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h6",{attrs:{id:"_2-8-7-使用引入包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-8-7-使用引入包"}},[s._v("#")]),s._v(" "),a("strong",[s._v("2.8.7 使用引入包")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("var hello = require('gp19-npm')\nhello.sayHello()\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h4",{attrs:{id:"_2-9-npm-脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-9-npm-脚本"}},[s._v("#")]),s._v(" "),a("strong",[s._v("2.9 npm 脚本")])]),s._v(" "),a("p",[a("strong",[s._v("Node 开发离不开 npm，而脚本功能是 npm 最强大、最常用的功能之一。")])]),s._v(" "),a("p",[a("strong",[a("strong",[s._v("一、什么是 npm 脚本？")])])]),s._v(" "),a("p",[a("strong",[s._v("npm 允许在 package.json 文件里面，使用 scripts 字段定义脚本命令。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('{\n  // ...\n  "scripts": {\n    "build": "node build.js"\n  }\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[a("strong",[a("strong",[s._v("二、执行顺序")])])]),s._v(" "),a("p",[a("strong",[s._v("如果 npm 脚本里面需要执行多个任务，那么需要明确它们的执行顺序。")])]),s._v(" "),a("p",[a("strong",[s._v("script1.js")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("var x = 0\nconsole.log(x)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("script2.js")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('var y = 0\nconsole.log(y)\n"scripts": {\n  "script1": "node script1.js",\n  "script2": "node script2.js"\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[a("strong",[s._v("如果是并行执行（即同时的平行执行），可以使用 "),a("strong",[a("code",[s._v("&")])]),s._v(" 符号。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ npm run script1 & npm run script2\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("如果是继发执行（即只有前一个任务成功，才执行下一个任务），可以使用 "),a("strong",[a("code",[s._v("&&")])]),s._v(" 符号。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ npm run script1 && npm run script2\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[a("strong",[s._v("三、简写形式")])])]),s._v(" "),a("p",[a("strong",[s._v("常用的 npm 脚本简写形式。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("npm start 是 npm run start\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[a("strong",[s._v("四、变量")])])]),s._v(" "),a("p",[a("strong",[s._v("npm 脚本有一个非常强大的功能，就是可以使用 npm 的内部变量。")])]),s._v(" "),a("p",[a("strong",[s._v("首先，通过 "),a("strong",[a("code",[s._v("npm_package_")])]),s._v(" 前缀，npm 脚本可以拿到 package.json 里面的字段。比如，下面是一个 package.json。")])]),s._v(" "),a("blockquote",[a("p",[a("strong",[s._v("注意：一定要在 npm 脚本中运行（如：npm run view）才可以，直接在命令行中运行JS（如：node view.js）是拿不到值的")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('{\n  "name": "foo", \n  "version": "1.2.5",\n  "scripts": {\n    "view": "node view.js"\n  }\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[a("strong",[s._v("那么，变量 npm_package_name 返回 foo，变量 npm_package_version 返回 1.2.5。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("// view.js\nconsole.log(process.env.npm_package_name); // foo\nconsole.log(process.env.npm_package_version); // 1.2.5\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[a("strong",[s._v("上面代码中，我们通过环境变量 process.env 对象，拿到 package.json 的字段值。如果是 Bash 脚本，可以用$npm_package_name 和 $npm_package_version 取到这两个值。")])]),s._v(" "),a("p",[a("strong",[s._v("npm")]),a("em",[a("strong",[s._v("package")])]),a("strong",[s._v("前缀也支持嵌套的package.json字段。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('"repository": {\n  "type": "git",\n  "url": "xxx"\n},\nscripts: {\n  "view": "echo $npm_package_repository_type"\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[a("strong",[s._v("上面代码中，repository 字段的 type 属性，可以通过 npm_package_repository_type 取到。")])]),s._v(" "),a("p",[a("strong",[s._v("下面是另外一个例子。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('"scripts": {\n  "install": "foo.js"\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[a("strong",[s._v("上面代码中，npm_package_scripts_install 变量的值等于 foo.js。")])]),s._v(" "),a("p",[a("strong",[s._v("然后，npm 脚本还可以通过 npm")]),a("em",[a("strong",[s._v("config")])]),s._v("** 前缀，拿到 npm 的配置变量，即 npm config get xxx 命令返回的值。比如，当前模块的发行标签，可以通过 npm_config_tag 取到。**")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('"view": "echo $npm_config_tag",\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("注意，package.json 里面的 config 对象，可以被环境变量覆盖。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('{ \n  "name" : "foo",\n  "config" : { "port" : "8080" },\n  "scripts" : { "start" : "node server.js" }\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[a("strong",[s._v("上面代码中，npm_package_config_port 变量返回的是 8080。这个值可以用下面的方法覆盖。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ npm config set foo:port 80\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("最后，env命令可以列出所有环境变量。")])]),s._v(" "),a("p",[a("strong",[s._v('"env": "env"')])]),s._v(" "),a("h4",{attrs:{id:"_2-10-npm-安装-git-上发布的包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-npm-安装-git-上发布的包"}},[s._v("#")]),s._v(" "),a("strong",[s._v("2.10 npm 安装 git 上发布的包")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 这样适合安装公司内部的git服务器上的项目\nnpm install git+https://git@github.com:lurongtao/gp-project.git\n\n# 或者以ssh的方式\nnpm install git+ssh://git@github.com:lurongtao/gp-project.git\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h4",{attrs:{id:"_2-11-cross-env-使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-11-cross-env-使用"}},[s._v("#")]),s._v(" "),a("strong",[s._v("2.11 cross-env 使用")])]),s._v(" "),a("h5",{attrs:{id:"_2-11-1-cross-env是什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-11-1-cross-env是什么"}},[s._v("#")]),s._v(" "),a("strong",[s._v("2.11.1 cross-env是什么")])]),s._v(" "),a("p",[a("strong",[s._v("运行跨平台设置和使用环境变量的脚本")])]),s._v(" "),a("h5",{attrs:{id:"_2-11-2-出现原因"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-11-2-出现原因"}},[s._v("#")]),s._v(" "),a("strong",[s._v("2.11.2 出现原因")])]),s._v(" "),a("p",[a("strong",[s._v("当您使用 NODE_ENV=production, 来设置环境变量时，大多数 Windows 命令提示将会阻塞(报错)。（异常是Windows上的Bash，它使用本机Bash。）换言之，Windows 不支持 NODE_ENV=production 的设置方式。")])]),s._v(" "),a("h5",{attrs:{id:"_2-11-3-解决"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-11-3-解决"}},[s._v("#")]),s._v(" "),a("strong",[s._v("2.11.3 解决")])]),s._v(" "),a("p",[a("strong",[s._v("cross-env 使得您可以使用单个命令，而不必担心为平台正确设置或使用环境变量。这个迷你的包(cross-env)能够提供一个设置环境变量的 scripts，让你能够以 Unix 方式设置环境变量，然后在 Windows 上也能兼容运行。")])]),s._v(" "),a("h5",{attrs:{id:"_2-11-4-安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-11-4-安装"}},[s._v("#")]),s._v(" "),a("strong",[s._v("2.11.4 安装")])]),s._v(" "),a("p",[a("strong",[s._v("npm install --save-dev cross-env")])]),s._v(" "),a("h5",{attrs:{id:"_2-11-5-使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-11-5-使用"}},[s._v("#")]),s._v(" "),a("strong",[s._v("2.11.5 使用")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('{\n  "scripts": {\n    "build": "cross-env NODE_ENV=production webpack --config build/webpack.config.js"\n  }\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[a("strong",[s._v("NODE_ENV环境变量将由 cross-env 设置 打印 process.env.NODE_ENV === 'production'")])]),s._v(" "),a("h3",{attrs:{id:"_3、nrm-npm-registry-manager"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、nrm-npm-registry-manager"}},[s._v("#")]),s._v(" "),a("strong",[s._v("3、NRM: npm registry manager")])]),s._v(" "),a("h4",{attrs:{id:"_3-1-手工切换源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-手工切换源"}},[s._v("#")]),s._v(" "),a("strong",[s._v("3.1 手工切换源")])]),s._v(" "),a("h5",{attrs:{id:"_3-1-1-查看当前源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-1-查看当前源"}},[s._v("#")]),s._v(" "),a("strong",[s._v("3.1.1 查看当前源")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("npm config get registry\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h5",{attrs:{id:"_3-1-2-切换淘宝源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-2-切换淘宝源"}},[s._v("#")]),s._v(" "),a("strong",[s._v("3.1.2 切换淘宝源")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("npm config set registry https://registry.npm.taobao.org\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"_3-2-nrm-管理源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-nrm-管理源"}},[s._v("#")]),s._v(" "),a("strong",[s._v("3.2 NRM 管理源")])]),s._v(" "),a("p",[a("strong",[s._v("NRM (npm registry manager)是npm的镜像源管理工具，有时候国外资源太慢，使用这个就可以快速地在 npm 源间切换。")])]),s._v(" "),a("h5",{attrs:{id:"_3-2-1-安装-nrm"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-1-安装-nrm"}},[s._v("#")]),s._v(" "),a("strong",[s._v("3.2.1 安装 nrm")])]),s._v(" "),a("p",[a("strong",[s._v("在命令行执行命令，npm install -g nrm，全局安装nrm。")])]),s._v(" "),a("h5",{attrs:{id:"_3-2-2-使用-nrm"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-2-使用-nrm"}},[s._v("#")]),s._v(" "),a("strong",[s._v("3.2.2 使用 nrm")])]),s._v(" "),a("p",[a("strong",[s._v("执行命令 nrm ls 查看可选的源。 其中，带*的是当前使用的源，上面的输出表明当前源是官方源。")])]),s._v(" "),a("h5",{attrs:{id:"_3-2-3-切换-nrm"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-3-切换-nrm"}},[s._v("#")]),s._v(" "),a("strong",[s._v("3.2.3 切换 nrm")])]),s._v(" "),a("p",[a("strong",[s._v("如果要切换到taobao源，执行命令nrm use taobao。")])]),s._v(" "),a("h5",{attrs:{id:"_3-2-4-测试速度"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-4-测试速度"}},[s._v("#")]),s._v(" "),a("strong",[s._v("3.2.4 测试速度")])]),s._v(" "),a("p",[a("strong",[s._v("你还可以通过 nrm test 测试相应源的响应时间。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("nrm test\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_4、npx-npm-package-extention"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4、npx-npm-package-extention"}},[s._v("#")]),s._v(" "),a("strong",[s._v("4、NPX: npm package extention")])]),s._v(" "),a("p",[a("strong",[s._v("npm 从5.2版开始，增加了 npx 命令。它有很多用处，本文介绍该命令的主要使用场景。")])]),s._v(" "),a("p",[a("strong",[s._v("Node 自带 npm 模块，所以可以直接使用 npx 命令。万一不能用，就要手动安装一下。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ npm install -g npx\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"_4-1-调用项目安装的模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-调用项目安装的模块"}},[s._v("#")]),s._v(" "),a("strong",[s._v("4.1 调用项目安装的模块")])]),s._v(" "),a("p",[a("strong",[s._v("npx 想要解决的主要问题，就是调用项目内部安装的模块。比如，项目内部安装了Mocha。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ npm install -D mocha\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("一般来说，调用 Mocha ，只能在项目脚本和 package.json 的scripts字段里面，如果想在命令行下调用，必须像下面这样。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 项目的根目录下执行\n$ node-modules/.bin/mocha --version\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("npx 就是想解决这个问题，让项目内部安装的模块用起来更方便，只要像下面这样调用就行了。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ npx mocha --version\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("npx 的原理很简单，就是运行的时候，会到node_modules/.bin路径和环境变量$PATH里面，检查命令是否存在。")])]),s._v(" "),a("p",[a("strong",[s._v("由于 npx 会检查环境变量$PATH，所以系统命令也可以调用。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 等同于 ls\n$ npx ls\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("注意，Bash 内置的命令不在$PATH里面，所以不能用。比如，cd是 Bash 命令，因此就不能用npx cd。")])]),s._v(" "),a("h4",{attrs:{id:"_4-2-避免全局安装模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-避免全局安装模块"}},[s._v("#")]),s._v(" "),a("strong",[s._v("4.2 避免全局安装模块")])]),s._v(" "),a("p",[a("strong",[s._v("除了调用项目内部模块，npx 还能避免全局安装的模块。比如，create-react-app 这个模块是全局安装，npx 可以运行它，而且不进行全局安装。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ npx create-react-app my-react-app\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("上面代码运行时，npx 将 create-react-app 下载到一个临时目录，使用以后再删除。所以，以后再次执行上面的命令，会重新下载 create-react-app。")])]),s._v(" "),a("p",[a("strong",[s._v("注意，只要 npx 后面的模块无法在本地发现，就会下载同名模块。比如，本地没有安装http-server模块，下面的命令会自动下载该模块，在当前目录启动一个 Web 服务。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ npx http-server\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"_4-3-no-install-参数和-ignore-existing-参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-no-install-参数和-ignore-existing-参数"}},[s._v("#")]),s._v(" "),a("strong",[s._v("4.3 --no-install 参数和 --ignore-existing 参数")])]),s._v(" "),a("p",[a("strong",[s._v("如果想让 npx 强制使用本地模块，不下载远程模块，可以使用--no-install参数。如果本地不存在该模块，就会报错。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ npx --no-install http-server\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("反过来，如果忽略本地的同名模块，强制安装使用远程模块，可以使用--ignore-existing参数。比如，本地已经安装了http-server，但还是想使用远程模块，就用这个参数。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ npx --ignore-existing http-server\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h1",{attrs:{id:"三、模块-包-与-commonjs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、模块-包-与-commonjs"}},[s._v("#")]),s._v(" "),a("strong",[s._v("三、模块/包 与 CommonJS")])]),s._v(" "),a("h3",{attrs:{id:"_1、模块-包分类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、模块-包分类"}},[s._v("#")]),s._v(" "),a("strong",[s._v("1、模块/包分类")])]),s._v(" "),a("p",[a("strong",[s._v("Node.js 有三类模块，即内置的模块、第三方的模块、自定义的模块。")])]),s._v(" "),a("h4",{attrs:{id:"_1-1-内置的模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-内置的模块"}},[s._v("#")]),s._v(" "),a("strong",[s._v("1.1 内置的模块")])]),s._v(" "),a("p",[a("strong",[s._v("Node.js 内置模块又叫核心模块，Node.js安装完成可直接使用。如：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const path = require('path')\nvar extname = path.extname('index.html')\nconsole.log(extname)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h4",{attrs:{id:"_1-2-第三方的node-js模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-第三方的node-js模块"}},[s._v("#")]),s._v(" "),a("strong",[s._v("1.2 第三方的Node.js模块")])]),s._v(" "),a("p",[a("strong",[s._v("第三方的Node.js模块指的是为了实现某些功能，发布的npmjs.org上的模块，按照一定的开源协议供社群使用。如：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("npm install chalk\nconst chalk = require('chalk')\nconsole.log(chalk.blue('Hello world!'))\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h4",{attrs:{id:"_1-3-自定义的node-js模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-自定义的node-js模块"}},[s._v("#")]),s._v(" "),a("strong",[s._v("1.3 自定义的Node.js模块")])]),s._v(" "),a("p",[a("strong",[s._v("自定义的Node.js模块，也叫文件模块，是我们自己写的供自己使用的模块。同时，这类模块发布到npmjs.org上就成了开源的第三方模块。")])]),s._v(" "),a("p",[a("strong",[s._v("自定义模块是在运行时动态加载，需要完整的路径分析、文件定位、编译执行过程、速度相比核心模块稍微慢一些，但是用的非常多。")])]),s._v(" "),a("h5",{attrs:{id:"_1-3-1-模块定义、接口暴露和引用接口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-1-模块定义、接口暴露和引用接口"}},[s._v("#")]),s._v(" "),a("strong",[s._v("1.3.1 模块定义、接口暴露和引用接口")])]),s._v(" "),a("p",[a("strong",[s._v("我们可以把公共的功能 抽离成为一个单独的 js 文件 作为一个模块，默认情况下面这个模块里面的方法或者属性，外面是没法访问的。如果要让外部可以访问模块里面的方法或者属性，就必须在模块里面通过 exports 或者 module.exports 暴露属性或者方法。")])]),s._v(" "),a("p",[a("strong",[s._v("m1.js：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const name = 'gp19'\n\nconst sayName = () => {\n  console.log(name)\n}\n\nconsole.log('module 1')\n\n// 接口暴露方法一：\nmodule.exports = {\n  say: sayName\n}\n\n// 接口暴露方法二：\nexports.say = sayName\n\n// 错误！\nexports = {\n  say: sayName\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br")])]),a("p",[a("strong",[s._v("main.js：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const m1 = require('./m1')\nm1.say()\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h5",{attrs:{id:"_1-3-2-模块的循环引用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-2-模块的循环引用"}},[s._v("#")]),s._v(" "),a("strong",[s._v("1.3.2 模块的循环引用")])]),s._v(" "),a("p",[a("strong",[s._v("由于 exports 使用方式方式不对，会在两个不同 js 循环引用的情况下，导致其中一个 js 无法获取另外一个 js 的方法，从而导致执行报错。如：")])]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("a.js")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("exports.done = false\nconst b = require('./b.js')\nconsole.log('in a, b.done = %j', b.done)\nexports.done = true\nconsole.log('a done')\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("ul",[a("li",[a("strong",[s._v("b.js")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("console.log('b starting')\nexports.done = false\nconst a = require('./a.js')\nconsole.log('in b, a.done = %j', a.done)\nexports.done = true\nconsole.log('b done')\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("ul",[a("li",[a("strong",[s._v("main.js")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("console.log('main starting')\nconst a = require('./a.js')\nconst b = require('./b.js')\nconsole.log('in main, a.done = %j, b.done = %j', a.done, b.done)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[a("strong",[s._v("main.js 首先会 load a.js, 此时执行到const b = require('./b.js');的时候，程序会转去loadb.js, 在b.js中执行到const a = require('./a.js'); 为了防止无限循环，将a.jsexports的未完成副本返回到b.js模块。然后b.js完成加载，并将其导出对象提供给a.js模块。")])]),s._v(" "),a("p",[a("strong",[s._v("我们知道nodeJs的对每个js文件进行了一层包装称为module，module中有一个属性exports，当调用require('a.js')的时候其实返回的是module.exports对象，module.exports初始化为一个{}空的object，所以在上面的例子中，执行到b.js中const a = require('./a.js');时不会load新的a module, 而是将已经load但是还未完成的a module的exports属性返回给b module，所以b.js拿到的是a module的exports对象，即：{done:false}, 虽然在a.js中exports.done被修改成了true，但是由于此时a.js未load完成，所以在b.js输出的a module的属性done为false，而在main.js中输出的a module的属性done为true. Nodejs通过上面这种返回未完成exports对象来解决循环引用的问题。")])]),s._v(" "),a("h1",{attrs:{id:"四、常用内置模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四、常用内置模块"}},[s._v("#")]),s._v(" "),a("strong",[s._v("四、常用内置模块")])]),s._v(" "),a("p",[a("strong",[s._v("这里介绍几个常用的内置模块：url, querystring, http, events, fs, stream, readline, crypto, zlib")])]),s._v(" "),a("h3",{attrs:{id:"_1、url"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、url"}},[s._v("#")]),s._v(" "),a("strong",[s._v("1、url")])]),s._v(" "),a("h4",{attrs:{id:"_1-1-parse"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-parse"}},[s._v("#")]),s._v(" "),a("strong",[s._v("1.1 parse")])]),s._v(" "),a("p",[a("strong",[s._v("url.parse(urlString[, parseQueryString[, slashesDenoteHost]])")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const url = require('url')\nconst urlString = 'https://www.baidu.com:443/ad/index.html?id=8&name=mouse#tag=110'\nconst parsedStr = url.parse(urlString)\nconsole.log(parsedStr)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h4",{attrs:{id:"_1-2-format"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-format"}},[s._v("#")]),s._v(" "),a("strong",[s._v("1.2 format")])]),s._v(" "),a("p",[a("strong",[s._v("url.format(urlObject)")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const url = require('url')\nconst urlObject = {\n  protocol: 'https:',\n  slashes: true,\n  auth: null,\n  host: 'www.baidu.com:443',\n  port: '443',\n  hostname: 'www.baidu.com',\n  hash: '#tag=110',\n  search: '?id=8&name=mouse',\n  query: { id: '8', name: 'mouse' },\n  pathname: '/ad/index.html',\n  path: '/ad/index.html?id=8&name=mouse',\n  href: 'https://www.baidu.com:443/ad/index.html?id=8&name=mouse#tag=110'\n}\nconst parsedObj = url.format(urlObject)\nconsole.log(parsedObj)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("h4",{attrs:{id:"_1-3-resolve"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-resolve"}},[s._v("#")]),s._v(" "),a("strong",[s._v("1.3 resolve")])]),s._v(" "),a("p",[a("strong",[s._v("url.resolve(from, to)")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const url = require('url')\nvar a = url.resolve('/one/two/three', 'four')\nvar b = url.resolve('http://example.com/', '/one')\nvar c = url.resolve('http://example.com/one', '/two')\nconsole.log(a + \",\" + b + \",\" + c)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h3",{attrs:{id:"_2、querystring"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、querystring"}},[s._v("#")]),s._v(" "),a("strong",[s._v("2、querystring")])]),s._v(" "),a("h4",{attrs:{id:"_2-1-parse"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-parse"}},[s._v("#")]),s._v(" "),a("strong",[s._v("2.1 parse")])]),s._v(" "),a("p",[a("strong",[s._v("querystring.parse(str[, sep[, eq[, options]]])")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const querystring = require('querystring')\nvar qs = 'x=3&y=4'\nvar parsed = querystring.parse(qs)\nconsole.log(parsed)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h4",{attrs:{id:"_2-2-stringify"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-stringify"}},[s._v("#")]),s._v(" "),a("strong",[s._v("2.2 stringify")])]),s._v(" "),a("p",[a("strong",[s._v("querystring.stringify(obj[, sep[, eq[, options]]])")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const querystring = require('querystring')\nvar qo = {\n  x: 3,\n  y: 4\n}\nvar parsed = querystring.stringify(qo)\nconsole.log(parsed)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h4",{attrs:{id:"_2-3-escape-unescape"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-escape-unescape"}},[s._v("#")]),s._v(" "),a("strong",[s._v("2.3 escape/unescape")])]),s._v(" "),a("p",[a("strong",[s._v("querystring.escape(str)")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const querystring = require('querystring')\nvar str = 'id=3&city=北京&url=https://www.baidu.com'\nvar escaped = querystring.escape(str)\nconsole.log(escaped)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[a("strong",[s._v("querystring.unescape(str)")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const querystring = require('querystring')\nvar str = 'id%3D3%26city%3D%E5%8C%97%E4%BA%AC%26url%3Dhttps%3A%2F%2Fwww.baidu.com'\nvar unescaped = querystring.unescape(str)\nconsole.log(unescaped)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h3",{attrs:{id:"_3、http-https"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、http-https"}},[s._v("#")]),s._v(" "),a("strong",[s._v("3、http/https")])]),s._v(" "),a("h4",{attrs:{id:"_3-1-get"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-get"}},[s._v("#")]),s._v(" "),a("strong",[s._v("3.1 get")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("var http = require('http')\nvar https = require('https')\n\n// 1、接口 2、跨域\nconst server = http.createServer((request, response) => {\n  var url = request.url.substr(1)\n\n  var data = ''\n\n  response.writeHeader(200, {\n    'content-type': 'application/json;charset=utf-8',\n    'Access-Control-Allow-Origin': '*'\n  })\n\n  https.get(`https://m.lagou.com/listmore.json${url}`, (res) => {\n\n    res.on('data', (chunk) => {\n      data += chunk\n    })\n\n    res.on('end', () => {\n      response.end(JSON.stringify({\n        ret: true,\n        data\n      }))\n    })\n  })\n\n})\n\nserver.listen(8080, () => {\n  console.log('localhost:8080')\n})\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br")])]),a("h4",{attrs:{id:"_3-2-post-服务器提交-攻击"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-post-服务器提交-攻击"}},[s._v("#")]),s._v(" "),a("strong",[s._v("3.2 post：服务器提交（攻击）")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const https = require('https')\nconst querystring = require('querystring')\n\nconst postData = querystring.stringify({\n  province: '上海',\n  city: '上海',\n  district: '宝山区',\n  address: '同济支路199号智慧七立方3号楼2-4层',\n  latitude: 43.0,\n  longitude: 160.0,\n  message: '求购一条小鱼',\n  contact: '13666666',\n  type: 'sell',\n  time: 1571217561\n})\n\nconst options = {\n  protocol: 'https:',\n  hostname: 'ik9hkddr.qcloud.la',\n  method: 'POST',\n  port: 443,\n  path: '/index.php/trade/add_item',\n  headers: {\n    'Content-Type': 'application/x-www-form-urlencoded',\n    'Content-Length': Buffer.byteLength(postData)\n  }\n}\n\nfunction doPost() {\n  let data\n\n  let req = https.request(options, (res) => {\n    res.on('data', chunk => data += chunk)\n    res.on('end', () => {\n      console.log(data)\n    })\n  })\n\n  req.write(postData)\n  req.end()\n}\n\n// setInterval(() => {\n//   doPost()\n// }, 1000)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br")])]),a("h4",{attrs:{id:"_3-3-跨域-jsonp"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-跨域-jsonp"}},[s._v("#")]),s._v(" "),a("strong",[s._v("3.3 跨域：jsonp")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const http = require('http')\nconst url = require('url')\n\nconst app = http.createServer((req, res) => {\n  let urlObj = url.parse(req.url, true)\n\n  switch (urlObj.pathname) {\n    case '/api/user':\n      res.end(`${urlObj.query.cb}({\"name\": \"gp145\"})`)\n      break\n    default:\n      res.end('404.')\n      break\n  }\n})\n\napp.listen(8080, () => {\n  console.log('localhost:8080')\n})\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br")])]),a("h4",{attrs:{id:"_3-4-跨域-cors"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-跨域-cors"}},[s._v("#")]),s._v(" "),a("strong",[s._v("3.4 跨域：CORS")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const http = require('http')\nconst url = require('url')\nconst querystring = require('querystring')\n\nconst app = http.createServer((req, res) => {\n  let data = ''\n  let urlObj = url.parse(req.url, true)\n\n  res.writeHead(200, {\n    'content-type': 'application/json;charset=utf-8',\n    'Access-Control-Allow-Origin': '*'\n  })\n\n  req.on('data', (chunk) => {\n    data += chunk\n  })\n\n  req.on('end', () => {\n    responseResult(querystring.parse(data))\n  })\n\n  function responseResult(data) {\n    switch (urlObj.pathname) {\n      case '/api/login':\n        res.end(JSON.stringify({\n          message: data\n        }))\n        break\n      default:\n        res.end('404.')\n        break\n    }\n  }\n})\n\napp.listen(8080, () => {\n  console.log('localhost:8080')\n})\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br")])]),a("h4",{attrs:{id:"_3-5-跨域-middleware-http-proxy-middware"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-5-跨域-middleware-http-proxy-middware"}},[s._v("#")]),s._v(" "),a("strong",[s._v("3.5 跨域：middleware（http-proxy-middware）")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const http = require('http')\nconst proxy = require('http-proxy-middleware')\n\nhttp.createServer((req, res) => {\n  let url = req.url\n\n  res.writeHead(200, {\n    'Access-Control-Allow-Origin': '*'\n  })\n\n  if (/^\\/api/.test(url)) {\n    let apiProxy = proxy('/api', { \n      target: 'https://m.lagou.com',\n      changeOrigin: true,\n      pathRewrite: {\n        '^/api': ''\n      }\n    })\n\n    // http-proy-middleware 在Node.js中使用的方法\n    apiProxy(req, res)\n  } else {\n    switch (url) {\n      case '/index.html':\n        res.end('index.html')\n        break\n      case '/search.html':\n        res.end('search.html')\n        break\n      default:\n        res.end('[404]page not found.')\n    }\n  }\n}).listen(8080)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br")])]),a("h4",{attrs:{id:"_3-6-爬虫"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-6-爬虫"}},[s._v("#")]),s._v(" "),a("strong",[s._v("3.6 爬虫")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const https = require('https')\nconst http = require('http')\nconst cheerio = require('cheerio')\n\nhttp.createServer((request, response) => {\n  response.writeHead(200, {\n    'content-type': 'application/json;charset=utf-8'\n  })\n\n  const options = {\n    protocol: 'https:',\n    hostname: 'maoyan.com',\n    port: 443,\n    path: '/',\n    method: 'GET'\n  }\n\n  const req = https.request(options, (res) => {\n    let data = ''\n    res.on('data', (chunk) => {\n      data += chunk\n    })\n\n    res.on('end', () => {\n      filterData(data)\n    })\n  })\n\n  function filterData(data) {\n    let $ = cheerio.load(data)\n    let $movieList = $('.movie-item')\n    let movies = []\n    $movieList.each((index, value) => {\n      movies.push({\n        title: $(value).find('.movie-title').attr('title'),\n        score: $(value).find('.movie-score i').text(),\n      })\n    })\n\n    response.end(JSON.stringify(movies))\n  }\n\n  req.end()\n}).listen(9000)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br")])]),a("h3",{attrs:{id:"_4、events"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4、events"}},[s._v("#")]),s._v(" "),a("strong",[s._v("4、Events")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const EventEmitter = require('events')\n\nclass MyEventEmitter extends EventEmitter {}\n\nconst event = new MyEventEmitter()\n\nevent.on('play', (movie) => {\n  console.log(movie)\n})\n\nevent.emit('play', '我和我的祖国')\nevent.emit('play', '中国机长')\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("h3",{attrs:{id:"_5、file-system"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5、file-system"}},[s._v("#")]),s._v(" "),a("strong",[s._v("5、File System")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const fs = require('fs')\nconst fsP = require('fs').promises\n\n// 创建文件夹\nfs.mkdir('./logs', (err) => {\n  console.log('done.')\n})\n\n// 文件夹改名\nfs.rename('./logs', './log', () => {\n  console.log('done')\n})\n\n// 删除文件夹\nfs.rmdir('./log', () => {\n  console.log('done.')\n})\n\n// 写内容到文件里\nfs.writeFile(\n  './logs/log1.txt',\n  'hello',\n  // 错误优先的回调函数\n  (err) => {\n    if (err) {\n      console.log(err.message)\n    } else {\n      console.log('文件创建成功')\n    }\n  }\n)\n\n// 给文件追加内容\nfs.appendFile('./logs/log1.txt', '\\nworld', () => {\n  console.log('done.')\n})\n\n// 读取文件内容\nfs.readFile('./logs/log1.txt', 'utf-8', (err, data) => {\n  console.log(data)\n})\n\n// 删除文件\nfs.unlink('./logs/log1.txt', (err) => {\n  console.log('done.')\n})\n\n// 批量写文件\nfor (var i = 0; i < 10; i++) {\n  fs.writeFile(`./logs/log-${i}.txt`, `log-${i}`, (err) => {\n    console.log('done.')\n  })\n}\n\n// 读取文件/目录信息\nfs.readdir('./', (err, data) => {\n  data.forEach((value, index) => {\n    fs.stat(`./${value}`, (err, stats) => {\n      // console.log(value + ':' + stats.size)\n      console.log(value + ' is ' + (stats.isDirectory() ? 'directory' : 'file'))\n    })\n  })\n})\n\n// 同步读取文件\ntry {\n  const content = fs.readFileSync('./logs/log-1.txt', 'utf-8')\n  console.log(content)\n  console.log(0)\n} catch (e) {\n  console.log(e.message)\n}\n\nconsole.log(1)\n\n// 异步读取文件：方法一\nfs.readFile('./logs/log-0.txt', 'utf-8', (err, content) => {\n  console.log(content)\n  console.log(0)\n})\nconsole.log(1)\n\n// 异步读取文件：方法二\nfs.readFile('./logs/log-0.txt', 'utf-8').then(result => {\n  console.log(result)\n})\n\n// 异步读取文件：方法三\nfunction getFile() {\n  return new Promise((resolve) => {\n    fs.readFile('./logs/log-0.txt', 'utf-8', (err, data) => {\n      resolve(data)\n    })\n  })\n}\n\n;(async () => {\n  console.log(await getFile())\n})()\n\n// 异步读取文件：方法四\nconst fsp = fsP.readFile('./logs/log-1.txt', 'utf-8').then((result) => {\n  console.log(result)\n})\n\nconsole.log(fsP)\n\n// watch 监测文件变化\nfs.watch('./logs/log-0.txt', () => {\n  console.log(0)\n})\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br"),a("span",{staticClass:"line-number"},[s._v("93")]),a("br"),a("span",{staticClass:"line-number"},[s._v("94")]),a("br"),a("span",{staticClass:"line-number"},[s._v("95")]),a("br"),a("span",{staticClass:"line-number"},[s._v("96")]),a("br"),a("span",{staticClass:"line-number"},[s._v("97")]),a("br"),a("span",{staticClass:"line-number"},[s._v("98")]),a("br"),a("span",{staticClass:"line-number"},[s._v("99")]),a("br"),a("span",{staticClass:"line-number"},[s._v("100")]),a("br"),a("span",{staticClass:"line-number"},[s._v("101")]),a("br"),a("span",{staticClass:"line-number"},[s._v("102")]),a("br"),a("span",{staticClass:"line-number"},[s._v("103")]),a("br"),a("span",{staticClass:"line-number"},[s._v("104")]),a("br"),a("span",{staticClass:"line-number"},[s._v("105")]),a("br"),a("span",{staticClass:"line-number"},[s._v("106")]),a("br"),a("span",{staticClass:"line-number"},[s._v("107")]),a("br"),a("span",{staticClass:"line-number"},[s._v("108")]),a("br"),a("span",{staticClass:"line-number"},[s._v("109")]),a("br"),a("span",{staticClass:"line-number"},[s._v("110")]),a("br"),a("span",{staticClass:"line-number"},[s._v("111")]),a("br")])]),a("h3",{attrs:{id:"_6、stream"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6、stream"}},[s._v("#")]),s._v(" "),a("strong",[s._v("6、Stream")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const fs = require('fs')\n\nconst readstream = fs.createReadStream('./note.txt')\nconst writestream = fs.createWriteStream('./note2.txt')\n\nwritestream.write(readstream)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h3",{attrs:{id:"_7、zlib"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7、zlib"}},[s._v("#")]),s._v(" "),a("strong",[s._v("7、Zlib")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const fs = require('fs')\nconst zlib = require('zlib')\n\nconst gzip = zlib.createGzip()\n\nconst readstream = fs.createReadStream('./note.txt')\nconst writestream = fs.createWriteStream('./note2.txt')\n\nreadstream\n  .pipe(gzip)\n  .pipe(writestream)\n\nwritestream.write(readstream)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("h3",{attrs:{id:"_8、readline"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8、readline"}},[s._v("#")]),s._v(" "),a("strong",[s._v("8、ReadLine")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const readline = require('readline')\n\nconst rl = readline.createInterface({\n  input: process.stdin,\n  output: process.stdout\n})\n\nrl.question('What do you think of Node.js? ', (answer) => {\n  // TODO: Log the answer in a database\n  console.log(`Thank you for your valuable feedback: ${answer}`)\n\n  rl.close()\n})\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("h3",{attrs:{id:"_9、crypto"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9、crypto"}},[s._v("#")]),s._v(" "),a("strong",[s._v("9、Crypto")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const crypto = require('crypto')\n\nconst secret = 'abcdefg'\nconst hash = crypto.createHmac('sha256', secret)\n                   .update('I love you')\n                   .digest('hex')\nconsole.log(hash)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h1",{attrs:{id:"四、路由"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四、路由"}},[s._v("#")]),s._v(" "),a("strong",[s._v("四、路由")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("var http = require('http')\nvar fs = require('fs')\n\nhttp.createServer( function ( req, res ) {\n\n  switch ( req.url ) {\n    case '/home':\n      res.write('home')\n      res.end()\n      break\n    case '/mine':\n      res.write('mine')\n      res.end()\n      break\n    case '/login': \n      fs.readFile( './static/login.html',function ( error , data ) {\n        if ( error ) throw error  \n        res.write( data )\n        res.end()\n      })\n      break\n    case '/fulian.jpg':\n      fs.readFile( './static/fulian.jpg', 'binary', function( error , data ) {\n        if( error ) throw error \n        res.write( data, 'binary' )\n        res.end()\n      })\n      break\n    default: \n      break\n   }\n\n }).listen( 8000, 'localhost', function () {\n   console.log( '服务器运行在： http://localhost:8000' )\n })\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br")])]),a("h1",{attrs:{id:"五、静态资源服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#五、静态资源服务"}},[s._v("#")]),s._v(" "),a("strong",[s._v("五、静态资源服务")])]),s._v(" "),a("h3",{attrs:{id:"_5-1-readstaticfile"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-readstaticfile"}},[s._v("#")]),s._v(" "),a("strong",[s._v("5.1 readStaticFile")])]),s._v(" "),a("p",[a("strong",[s._v("/modules/readStaticFile.js")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('// 引入依赖的模块\nvar path = require(\'path\')\nvar fs = require(\'fs\')\nvar mime = require(\'mime\')\n\nfunction readStaticFile(res, filePathname) {\n\n  var ext = path.parse(filePathname).ext\n  var mimeType = mime.getType(ext)\n\n  // 判断路径是否有后缀, 有的话则说明客户端要请求的是一个文件 \n  if (ext) {\n    // 根据传入的目标文件路径来读取对应文件\n    fs.readFile(filePathname, (err, data) => {\n    // 错误处理\n      if (err) {\n        res.writeHead(404, { "Content-Type": "text/plain" })\n        res.write("404 - NOT FOUND")\n        res.end()\n      } else {\n        res.writeHead(200, { "Content-Type": mimeType })\n        res.write(data)\n        res.end()\n      }\n    });\n    // 返回 true 表示, 客户端想要的 是 静态文件\n    return true\n  } else {\n    // 返回 false 表示, 客户端想要的 不是 静态文件\n    return false\n  }\n}\n\n// 导出函数\nmodule.exports = readStaticFile\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br")])]),a("h3",{attrs:{id:"_5-2-server"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-server"}},[s._v("#")]),s._v(" "),a("strong",[s._v("5.2 server")])]),s._v(" "),a("p",[a("strong",[s._v("/server.js")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("// 引入相关模块\nvar http = require('http');\nvar url = require('url');\nvar path = require('path');\nvar readStaticFile = require('./modules/readStaticFile');\n\n// 搭建 HTTP 服务器\nvar server = http.createServer(function(req, res) {\n  var urlObj = url.parse(req.url);\n  var urlPathname = urlObj.pathname;\n  var filePathname = path.join(__dirname, \"/public\", urlPathname);\n\n  // 读取静态文件\n  readStaticFile(res, filePathname);\n});\n\n// 在 3000 端口监听请求\nserver.listen(3000, function() {\n  console.log(\"服务器运行中.\");\n  console.log(\"正在监听 3000 端口:\")\n})\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])]),a("h3",{attrs:{id:"_5-3-最终目录结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-最终目录结构"}},[s._v("#")]),s._v(" "),a("strong",[s._v("5.3 最终目录结构")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://lurongtao.gitee.io/felixbooks-gp19-node.js/images/dir.jpg",alt:"img"}})]),s._v(" "),a("p",[a("a",{attrs:{href:"https://lurongtao.gitee.io/felixbooks-gp19-node.js/basics/01-Node.js%E5%9F%BA%E7%A1%80.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("**\n****  **"),a("OutboundLink")],1)])])}),[],!1,null,null,null);n.default=t.exports}}]);